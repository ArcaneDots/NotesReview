const t=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],e=["January","February","March","April","May","June","July","August","September","October","November","December"];function n(t){return`0${t}`.slice(-2)}function r(a,i){const o=a.getDay(),s=a.getDate(),c=a.getMonth(),u=a.getFullYear(),m=a.getHours(),d=a.getMinutes(),l=a.getSeconds();return i.replace(/%([%aAbBcdeHIlmMpPSwyYZz])/g,(function(i){let h;switch(i[1]){case"%":return"%";case"a":return t[o].slice(0,3);case"A":return t[o];case"b":return e[c].slice(0,3);case"B":return e[c];case"c":return a.toString();case"d":return n(s);case"e":return String(s);case"H":return n(m);case"I":return n(r(a,"%l"));case"l":return String(0===m||12===m?12:(m+12)%12);case"m":return n(c+1);case"M":return n(d);case"p":return m>11?"PM":"AM";case"P":return m>11?"pm":"am";case"S":return n(l);case"w":return String(o);case"y":return n(u%100);case"Y":return String(u);case"Z":return h=a.toString().match(/\((\w+)\)$/),h?h[1]:"";case"z":return h=a.toString().match(/\w([+-]\d\d\d\d) /),h?h[1]:""}return""}))}function a(t){let e;return function(){if(e)return e;if("Intl"in window)try{return e=new Intl.DateTimeFormat(void 0,t),e}catch(n){if(!(n instanceof RangeError))throw n}}}let i=null;const o=a({day:"numeric",month:"short"});function s(){if(null!==i)return i;const t=o();if(t){const e=t.format(new Date(0));return i=!!e.match(/^\d/),i}return!1}let c=null;const u=a({day:"numeric",month:"short",year:"numeric"});function m(t){const e=t.closest("[lang]");return e instanceof HTMLElement&&e.lang?e.lang:"default"}const d=new WeakMap;class l extends HTMLElement{static get observedAttributes(){return["datetime","day","format","lang","hour","minute","month","second","title","weekday","year","time-zone-name"]}connectedCallback(){const t=this.getFormattedTitle();t&&!this.hasAttribute("title")&&this.setAttribute("title",t);const e=this.getFormattedDate();e&&(this.textContent=e)}attributeChangedCallback(t,e,n){const r=this.getFormattedTitle();if("datetime"===t){const t=Date.parse(n);isNaN(t)?d.delete(this):d.set(this,new Date(t))}const a=this.getFormattedTitle(),i=this.getAttribute("title");"title"===t||!a||i&&i!==r||this.setAttribute("title",a);const o=this.getFormattedDate();o&&(this.textContent=o)}get date(){return d.get(this)}getFormattedTitle(){const t=this.date;if(!t)return;const e=h();if(e)return e.format(t);try{return t.toLocaleString()}catch(n){if(n instanceof RangeError)return t.toString();throw n}}getFormattedDate(){}}const h=a({day:"numeric",month:"short",year:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"}),g=new WeakMap;class w extends l{attributeChangedCallback(t,e,n){"hour"!==t&&"minute"!==t&&"second"!==t&&"time-zone-name"!==t||g.delete(this),super.attributeChangedCallback(t,e,n)}getFormattedDate(){const t=this.date;if(!t)return;return`${function(t,e){const n={weekday:{short:"%a",long:"%A"},day:{numeric:"%e","2-digit":"%d"},month:{short:"%b",long:"%B"},year:{numeric:"%Y","2-digit":"%y"}};let a=s()?"weekday day month year":"weekday month day, year";for(const r in n){const e=n[r][t.getAttribute(r)||""];a=a.replace(r,e||"")}return a=a.replace(/(\s,)|(,\s$)/,""),r(e,a).replace(/\s+/," ").trim()}(this,t)||""} ${function(t,e){const n={},i=t.getAttribute("hour");"numeric"!==i&&"2-digit"!==i||(n.hour=i);const o=t.getAttribute("minute");"numeric"!==o&&"2-digit"!==o||(n.minute=o);const s=t.getAttribute("second");"numeric"!==s&&"2-digit"!==s||(n.second=s);const c=t.getAttribute("time-zone-name");"short"!==c&&"long"!==c||(n.timeZoneName=c);if(0===Object.keys(n).length)return;let u=g.get(t);u||(u=a(n),g.set(t,u));const m=u();if(m)return m.format(e);return r(e,n.second?"%H:%M:%S":"%H:%M")}(this,t)||""}`.trim()}}window.customElements.get("local-time")||(window.LocalTimeElement=w,window.customElements.define("local-time",w));class f{constructor(t,e){this.date=t,this.locale=e}toString(){const t=this.timeElapsed();if(t)return t;{const t=this.timeAhead();return t||`on ${this.formatDate()}`}}timeElapsed(){const t=(new Date).getTime()-this.date.getTime(),e=Math.round(t/1e3),n=Math.round(e/60),r=Math.round(n/60),a=Math.round(r/24);return t>=0&&a<30?this.timeAgoFromMs(t):null}timeAhead(){const t=this.date.getTime()-(new Date).getTime(),e=Math.round(t/1e3),n=Math.round(e/60),r=Math.round(n/60),a=Math.round(r/24);return t>=0&&a<30?this.timeUntil():null}timeAgo(){const t=(new Date).getTime()-this.date.getTime();return this.timeAgoFromMs(t)}timeAgoFromMs(t){const e=Math.round(t/1e3),n=Math.round(e/60),r=Math.round(n/60),a=Math.round(r/24),i=Math.round(a/30),o=Math.round(i/12);return t<0||e<10?y(this.locale,0,"second"):e<45?y(this.locale,-e,"second"):e<90||n<45?y(this.locale,-n,"minute"):n<90||r<24?y(this.locale,-r,"hour"):r<36||a<30?y(this.locale,-a,"day"):i<18?y(this.locale,-i,"month"):y(this.locale,-o,"year")}microTimeAgo(){const t=(new Date).getTime()-this.date.getTime(),e=Math.round(t/1e3),n=Math.round(e/60),r=Math.round(n/60),a=Math.round(r/24),i=Math.round(a/30),o=Math.round(i/12);return n<1?"1m":n<60?`${n}m`:r<24?`${r}h`:a<365?`${a}d`:`${o}y`}timeUntil(){const t=this.date.getTime()-(new Date).getTime();return this.timeUntilFromMs(t)}timeUntilFromMs(t){const e=Math.round(t/1e3),n=Math.round(e/60),r=Math.round(n/60),a=Math.round(r/24),i=Math.round(a/30),o=Math.round(i/12);return i>=18||i>=12?y(this.locale,o,"year"):a>=45||a>=30?y(this.locale,i,"month"):r>=36||r>=24?y(this.locale,a,"day"):n>=90||n>=45?y(this.locale,r,"hour"):e>=90||e>=45?y(this.locale,n,"minute"):y(this.locale,e>=10?e:0,"second")}microTimeUntil(){const t=this.date.getTime()-(new Date).getTime(),e=Math.round(t/1e3),n=Math.round(e/60),r=Math.round(n/60),a=Math.round(r/24),i=Math.round(a/30),o=Math.round(i/12);return a>=365?`${o}y`:r>=24?`${a}d`:n>=60?`${r}h`:n>1?`${n}m`:"1m"}formatDate(){let t=s()?"%e %b":"%b %e";var e;return e=this.date,(new Date).getUTCFullYear()!==e.getUTCFullYear()&&(t+=function(){if(null!==c)return c;const t=u();if(t){const e=t.format(new Date(0));return c=!!e.match(/\d,/),c}return!0}()?", %Y":" %Y"),r(this.date,t)}formatTime(){const t=M();return t?t.format(this.date):r(this.date,"%l:%M%P")}}function y(t,e,n){const r=function(t,e){if("Intl"in window&&"RelativeTimeFormat"in window.Intl)try{return new Intl.RelativeTimeFormat(t,e)}catch(n){if(!(n instanceof RangeError))throw n}}(t,{numeric:"auto"});return r?r.format(e,n):function(t,e){if(0===t)switch(e){case"year":case"quarter":case"month":case"week":return`this ${e}`;case"day":return"today";case"hour":case"minute":return`in 0 ${e}s`;case"second":return"now"}else if(1===t)switch(e){case"year":case"quarter":case"month":case"week":return`next ${e}`;case"day":return"tomorrow";case"hour":case"minute":case"second":return`in 1 ${e}`}else if(-1===t)switch(e){case"year":case"quarter":case"month":case"week":return`last ${e}`;case"day":return"yesterday";case"hour":case"minute":case"second":return`1 ${e} ago`}else if(t>1)switch(e){case"year":case"quarter":case"month":case"week":case"day":case"hour":case"minute":case"second":return`in ${t} ${e}s`}else if(t<-1)switch(e){case"year":case"quarter":case"month":case"week":case"day":case"hour":case"minute":case"second":return`${-t} ${e}s ago`}throw new RangeError(`Invalid unit argument for format() '${e}'`)}(e,n)}const M=a({hour:"numeric",minute:"2-digit"});class b extends l{getFormattedDate(){const t=this.date;if(t)return new f(t,m(this)).toString()}connectedCallback(){T.push(this),A||(D(),A=window.setInterval(D,6e4)),super.connectedCallback()}disconnectedCallback(){const t=T.indexOf(this);-1!==t&&T.splice(t,1),T.length||A&&(clearInterval(A),A=null)}}const T=[];let A;function D(){let t,e,n;for(e=0,n=T.length;e<n;e++)t=T[e],t.textContent=t.getFormattedDate()||""}window.customElements.get("relative-time")||(window.RelativeTimeElement=b,window.customElements.define("relative-time",b));class F extends b{getFormattedDate(){const t=this.getAttribute("format"),e=this.date;if(e)return"micro"===t?new f(e,m(this)).microTimeAgo():new f(e,m(this)).timeAgo()}}window.customElements.get("time-ago")||(window.TimeAgoElement=F,window.customElements.define("time-ago",F));class $ extends b{getFormattedDate(){const t=this.getAttribute("format"),e=this.date;if(e)return"micro"===t?new f(e,m(this)).microTimeUntil():new f(e,m(this)).timeUntil()}}window.customElements.get("time-until")||(window.TimeUntilElement=$,window.customElements.define("time-until",$));export{w as LocalTimeElement,b as RelativeTimeElement,F as TimeAgoElement,$ as TimeUntilElement};

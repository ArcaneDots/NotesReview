!function(t){function e(e){for(var n,o,i=e[0],a=e[1],c=0,s=[];c<i.length;c++)o=i[c],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&s.push(r[o][0]),r[o]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n]);for(u&&u(e);s.length;)s.shift()()}var n={},r={8:0};function o(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.e=function(t){var e=[],n=r[t];if(0!==n)if(n)e.push(n[2]);else{var i=new Promise((function(e,o){n=r[t]=[e,o]}));e.push(n[2]=i);var a,c=document.createElement("script");c.charset="utf-8",c.timeout=120,o.nc&&c.setAttribute("nonce",o.nc),c.src=function(t){return o.p+"js/"+({0:"locales/de",1:"locales/en",2:"locales/es",3:"locales/it",4:"ui/expert",5:"ui/map",6:"ui/ui",7:"@github/time-elements",9:"relative-time-format/de",10:"relative-time-format/en",11:"relative-time-format/es",12:"relative-time-format/it",13:"vendors~relative-time-format"}[t]||t)+".min.js"}(t);var u=new Error;a=function(e){c.onerror=c.onload=null,clearTimeout(s);var n=r[t];if(0!==n){if(n){var o=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;u.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",u.name="ChunkLoadError",u.type=o,u.request=i,n[1](u)}r[t]=void 0}};var s=setTimeout((function(){a({type:"timeout",target:c})}),12e4);c.onerror=c.onload=a,document.head.appendChild(c)}return Promise.all(e)},o.m=t,o.c=n,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="dist/",o.oe=function(t){throw console.error(t),t};var i=window.webpackJsonp=window.webpackJsonp||[],a=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var u=a;o(o.s=101)}([function(t,e,n){"use strict";n.d(e,"c",(function(){return h})),n.d(e,"b",(function(){return v})),n.d(e,"a",(function(){return y}));var r=n(1),o=n.n(r),i=n(11),a=n.n(i),c="data-i18n",u="i18n",s=navigator.language.split("-")[0]||navigator.userLanguage.split("-")[0],l="en",f={main:null,fallback:null};function p(t){return t=(t=t.replace(/^[A-Z]/,(function(t){return t.toLowerCase()}))).replace(/[A-Z]/,(function(t){return"-".concat(t.toLowerCase())}))}function d(t,e,n){if(n){var r="!HTML!"===n.substring(0,6);r&&(n=n.replace(/^!HTML!(\s+)?/,"")),e?t.setAttribute(e,n):""!==n&&(r?t.innerHTML=n:t.textContent=n)}}function h(t,e){var n=null===f.main?null:m(t,f.main);return n&&"string"==typeof n||(n=m(t,f.fallback)),n&&"string"==typeof n?void 0!==e&&"string"==typeof n?n.replace("%s",e):"string"==typeof n?n.replace("{{version}}","1.3.0"):n:console.error(new Error("String with the tag ".concat(t,' could not be found in "').concat(s,'.json" and "').concat(l,'.json"')))}function m(t,e){for(var n=t.split("."),r=e,o=0;o<n.length;o++)void 0!==r[n[o]]&&(r=r[n[o]]);return r}function v(t){t.querySelectorAll("[".concat(c,"]")).forEach((function(t){!function(t,e){""!==e&&d(t,null,h(e));for(var n=0,r=Object.entries(t.dataset);n<r.length;n++){var o=a()(r[n],2),i=o[0],c=o[1];if(i.substring(0,u.length)===u&&i!==u)d(t,p(i.slice(u.length)),h(c))}}(t,t.dataset[u])}))}function y(){var t,e,r,i,a,c,u;return o.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:return p.prev=0,p.next=3,o.a.awrap(n(88)("./".concat(s)));case 3:t=p.sent,e=t.default,f.main=e,p.next=11;break;case 8:p.prev=8,p.t0=p.catch(0),console.error(new Error("".concat(s,".json does not exist, ").concat(l,".json is used instead")));case 11:return p.next=13,o.a.awrap(n(88)("./".concat(l)));case 13:if(r=p.sent,i=r.default,f.fallback=i,v(document.body),document.querySelector("html").setAttribute("lang",s),"Intl"in window){p.next=49;break}if(window.Intl={},"RelativeTimeFormat"in window.Intl){p.next=49;break}p.t1=s,p.next="de"===p.t1?24:"en"===p.t1?28:"es"===p.t1?32:"it"===p.t1?36:40;break;case 24:return p.next=26,o.a.awrap(n.e(9).then(n.t.bind(null,165,3)));case 26:return a=p.sent,p.abrupt("break",43);case 28:return p.next=30,o.a.awrap(n.e(10).then(n.t.bind(null,94,3)));case 30:return a=p.sent,p.abrupt("break",43);case 32:return p.next=34,o.a.awrap(n.e(11).then(n.t.bind(null,166,3)));case 34:return a=p.sent,p.abrupt("break",43);case 36:return p.next=38,o.a.awrap(n.e(12).then(n.t.bind(null,167,3)));case 38:return a=p.sent,p.abrupt("break",43);case 40:return p.next=42,o.a.awrap(n.e(10).then(n.t.bind(null,94,3)));case 42:a=p.sent;case 43:return p.next=45,o.a.awrap(n.e(13).then(n.bind(null,168)));case 45:c=p.sent,(u=c.default).addLocale(a.default),window.Intl.RelativeTimeFormat=u;case 49:return p.abrupt("return",Promise.resolve());case 50:case"end":return p.stop()}}),null,null,[[0,8]])}},function(t,e,n){t.exports=n(53)},function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return o})),n.d(e,"c",(function(){return i}));var r="map",o="expert";function i(){return document.body.dataset.mode}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return c})),n.d(e,"e",(function(){return u})),n.d(e,"f",(function(){return s})),n.d(e,"c",(function(){return l})),n.d(e,"d",(function(){return f}));var r=n(22),o=new AbortController,i=!1,a={JSON:"application/json",XML:"text/xml"};function c(t,e,n,o,i,a,c){var u=new URL("https://www.openstreetmap.org");u.pathname=c===r.a.DEFAULT?"/api/0.6/notes.json":"/api/0.6/notes/search.json";var s={q:t,limit:e,display_name:o,closed:n?"-1":"0",from:i,to:a};return c===r.a.DEFAULT&&(delete s.q,s.bbox=t),u.search=f(s,!0),u.toString()}function u(t,e){return i=!0,o=new AbortController,fetch(t,{signal:o.signal}).then((function(t){return e===a.JSON?t.json():t.text()})).then((function(t){return e===a.XML?(new DOMParser).parseFromString(t,"text/xml"):t})).catch((function(e){console.log("Error while fetching file at ".concat(t,": ").concat(e))})).finally((function(){i=!1}))}function s(){return i}function l(){o.abort()}function f(t,e){var n=[];for(var r in t)""===t[r]||e&&null===t[r]||n.push("".concat(encodeURIComponent(r),"=").concat(encodeURIComponent(t[r])));return n.join("&")}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(6),o=n.n(r),i=n(7),a=n.n(i),c=/^({|\[)[\s\S]*(}|\])$/m,u={map:{latitude:0,longitude:0,zoom:2},theme:"system",tools:{openstreetmap:!0,mapillary:!1},editors:{id:!0,josm:!1,level0:!0}},s=function(){function t(){o()(this,t)}return a()(t,null,[{key:"init",value:function(){Object.keys(u).forEach((function(e){null===t.get(e)&&t.reset()}))}},{key:"get",value:function(t,e){var n=(e?window.sessionStorage:window.localStorage).getItem(t);return c.test(n)&&(n=JSON.parse(n)),n}},{key:"set",value:function(t,e){var n=e?window.sessionStorage:window.localStorage;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var o=t[r];if(Array.isArray(o))n.setItem(r,JSON.stringify(o));else if("object"==typeof o){var i=n.getItem(r);i=c.test(i)?JSON.parse(i):{},n.setItem(r,JSON.stringify(Object.assign(i,o)))}else n.setItem(r,o)}}},{key:"remove",value:function(t,e){(e?window.sessionStorage:window.localStorage).removeItem(t)}},{key:"reset",value:function(){window.sessionStorage.clear(),window.localStorage.clear(),t.set(u)}}]),t}()},function(t,e,n){(function(e){var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||Function("return this")()}).call(this,n(54))},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}},function(t,e,n){var r=n(5),o=n(61),i=n(14),a=n(62),c=n(68),u=n(112),s=o("wks"),l=r.Symbol,f=u?l:a;t.exports=function(t){return i(s,t)||(c&&i(l,t)?s[t]=l[t]:s[t]=f("Symbol."+t)),s[t]}},function(t,e,n){"use strict";n.d(e,"e",(function(){return u})),n.d(e,"d",(function(){return s})),n.d(e,"c",(function(){return l})),n.d(e,"a",(function(){return f})),n.d(e,"f",(function(){return p})),n.d(e,"b",(function(){return d}));var r=n(11),o=n.n(r),i=n(0),a=n(22),c=2*Math.PI*6371e3/360;function u(t){var e=Math.abs((new Date).getTime()-t.getTime()),n=Math.round(e/36e5),r=Math.round(e/864e5),o=Math.round(e/2592e6),i=Math.round(e/315576e5);return 24>=n?"green-dark":31>=r?"green":6>o?"yellow":12>o?"amber":1>=i?"orange":"red"}function s(t){var e=document.getElementById("query").value,n=document.getElementById("user").value,r=document.getElementById("from").value,o=document.getElementById("to").value,c=!0;if(t.api===a.a.DEFAULT){r=""===r?new Date(0):new Date(r),o=""===o?new Date:new Date(o);var u=new Date(t.date);c=t.comments.map((function(t){return t.text})).join(" ").toLocaleUpperCase().includes(e.toLocaleUpperCase())&&u>r&&u<o&&(!!["","anonymous",i.c("note.anonymous")].includes(n)||0===n.localeCompare(t.user.name))}return c&&(!!document.getElementById("show-closed").checked||"open"===t.status)&&(!document.getElementById("hide-anonymous").checked||!t.anonymous)&&(!["anonymous",i.c("note.anonymous")].includes(n)||t.anonymous)}function l(t){var e=t.substring(0,2);if(/^(.).*(?:\s|_)(.).*$/.test(t)){var n=/^(.).*(?:\s|_)(.).*$/.exec(t),r=o()(n,3),i=r[1],a=r[2];e="".concat(i).concat(a)}else if(/^(.).*[a-z]([A-Z]).*$/.test(t)){var c=/^(.).*[a-z]([A-Z]).*$/.exec(t),u=o()(c,3),s=u[1],l=u[2];e="".concat(s).concat(l)}return e.toUpperCase()}function f(t,e){e||(e=100);var n=o()(t,2),r=n[0],i=n[1];return{left:i-e/(c*Math.cos(r*Math.PI/180)),bottom:r-e/c,right:i+e/(c*Math.cos(r*Math.PI/180)),top:r+e/c}}function p(t){return new Promise((function(e){setTimeout((function(){e()}),t)}))}function d(t,e){for(var n=[],r=0,o=t.length;r<o;r+=e)n.push(t.slice(r,r+e));return n}},function(t,e,n){var r=n(15);t.exports=function(t){if(!r(t))throw TypeError(String(t)+" is not an object");return t}},function(t,e,n){var r=n(147),o=n(148),i=n(149);t.exports=function(t,e){return r(t)||o(t,e)||i()}},function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return u})),n.d(e,"e",(function(){return s})),n.d(e,"d",(function(){return l})),n.d(e,"c",(function(){return f}));var r=n(0),o=n(2),i=n(21),a=n(9);function c(t,e,n){var r="bottom";return n&&(r=o.c()===o.b?"right":"left"),'\n  <span class="label label-'.concat(t," my-1 c-default tooltip tooltip-").concat(r,'" data-tooltip="').concat(e.toLocaleString(),'">\n    <time-ago datetime="').concat(e,'" title="">\n      ').concat(e.toLocaleDateString(),"\n    </time-ago>\n  </span>")}function u(t){if(0<t){var e=1===t?r.c("note.comment"):r.c("note.comments",t);return'<span class="label label-primary my-1 comments-modal-trigger c-hand">'.concat(e,"</span>")}}function s(t,e){if(e)return'<span class="label label-error my-1">'.concat(r.c("note.anonymous"),"</span>");var n=i.a.get(t),o=n.image?'<img src="'.concat(n.image,'">'):"",c=a.c(n.name);return'<figure class="avatar" data-initial="'.concat(c,'">').concat(o,'</figure>\n            <a href="').concat("https://www.openstreetmap.org","/user/").concat(n.name,'" target="_blank" rel="noopener">\n              <span class="tooltip tooltip-bottom" data-tooltip="').concat(r.c("user.created",n.created.toLocaleDateString()),'">\n                ').concat(n.name,"\n              </span>\n            </a>")}function l(t){return"opened"===t.action?'<span class="label label-success my-1">'.concat(r.c("note.action.opened"),"</span>"):"closed"===t.action?'<span class="label label-error my-1">'.concat(r.c("note.action.closed"),"</span>"):"reopened"===t.action?'<span class="label label-warning my-1">'.concat(r.c("note.action.reopened"),"</span>"):void 0}function f(t){return'<a href="'.concat("https://www.openstreetmap.org","/reports/new?reportable_type=Note&reportable_id=").concat(t,'" target="_blank" rel="noopener">\n            <span class="icon icon-flag float-right"></span>\n          </a>')}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){var r=n(18),o=n(28),i=n(34);t.exports=r?function(t,e,n){return o.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(5),o=n(41).f,i=n(16),a=n(24),c=n(43),u=n(107),s=n(66);t.exports=function(t,e){var n,l,f,p,d,h=t.target,m=t.global,v=t.stat;if(n=m?r:v?r[h]||c(h,{}):(r[h]||{}).prototype)for(l in e){if(p=e[l],f=t.noTargetGet?(d=o(n,l))&&d.value:n[l],!s(m?l:h+(v?".":"#")+l,t.forced)&&void 0!==f){if(typeof p==typeof f)continue;u(p,f)}(t.sham||f&&f.sham)&&i(p,"sham",!0),a(n,l,p,t)}}},function(t,e,n){var r=n(13);t.exports=!r((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,e,n){var r=n(36),o=n(5),i=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?i(r[t])||i(o[t]):r[t]&&r[t][e]||o[t]&&o[t][e]}},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(e)}t.exports=n},function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n(1),o=n.n(r),i=n(6),a=n.n(i),c=n(7),u=n.n(c),s=n(3),l=n(9),f=function(){function t(){a()(this,t)}return u()(t,null,[{key:"load",value:function(e){var n,r;return o.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:t.all||(t.all=new Set),e=l.b(Array.from(e),500),n=0;case 3:if(!(n<e.length)){i.next=12;break}return r="".concat("https://www.openstreetmap.org","/api/0.6/users?users=").concat(e[n].join(",")),i.next=7,o.a.awrap(s.e(r,s.a.XML));case 7:i.sent.documentElement.children.forEach((function(e){t.all.add({id:Number.parseInt(e.getAttribute("id")),name:e.getAttribute("display_name"),created:new Date(e.getAttribute("account_created")),description:e.getElementsByTagName("description")[0].innerText,image:e.querySelector("img[href]")?e.getElementsByTagName("img")[0].getAttribute("href"):null,changesets:e.getElementsByTagName("changesets")[0].getAttribute("count")})}));case 9:n++,i.next=3;break;case 12:case"end":return i.stop()}}))}},{key:"get",value:function(e){return e?Array.from(t.all).find((function(t){return t.id===e})):void 0}},{key:"avatar",value:function(e){var n,r;return o.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(n=document.getElementById("user-avatar"),e){i.next=4;break}return n.style.display="none",i.abrupt("return");case 4:return i.next=6,o.a.awrap(t.load(new Set([e])));case 6:r=t.get(Number.parseInt(e)),n.style.display="inline-block",n.dataset.initial=l.c(r.name),n.innerHTML=r.image?'<img src="'.concat(r.image,'">'):"";case 10:case"end":return i.stop()}}))}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return v})),n.d(e,"b",(function(){return y}));var r=n(1),o=n.n(r),i=n(51),a=n.n(i),c=n(6),u=n.n(c),s=n(7),l=n.n(s),f=n(26),p=n(2),d=n(40),h=n(3),m=n(21),v={DEFAULT:"default",SEARCH:"search"},y=function(){function t(e,n,r,o,i,a){u()(this,t),this.query=e||null,this.limit=n||null,this.closed=r||!1,this.user=o||null,this.from=i||null,this.to=a||null,this.notes=new Set,this.api=v.SEARCH,this.url=this.build()}return l()(t,[{key:"search",value:function(){var t,e,n,r,i,c=this;return o.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:if(this.notes=new Set,t=new Set,"string"!=typeof(e=this.url)){u.next=9;break}return u.next=6,o.a.awrap(h.e(e,h.a.JSON));case 6:n=u.sent,u.next=20;break;case 9:if(!Array.isArray(e)){u.next=20;break}n={type:"FeatureCollection",features:[]},r=0;case 12:if(!(r<e.length)){u.next=20;break}return u.next=15,o.a.awrap(h.e(e[r],h.a.JSON));case 15:(i=u.sent)&&i.features&&(n.features=n.features.concat(i.features));case 17:r++,u.next=12;break;case 20:if(n&&0!==n.features.length){u.next=22;break}return u.abrupt("return",this.notes);case 22:return n.features.forEach((function(e){try{var n=new d.a(e,c.api);c.notes.add(n),t=new Set([].concat(a()(t),a()(n.users)))}catch(t){console.error(t)}})),this.notes=Array.from(this.notes),this.notes.sort((function(t,e){return e.id-t.id})),u.next=27,o.a.awrap(m.a.load(t));case 27:return u.abrupt("return",this.notes);case 28:case"end":return u.stop()}}),null,this)}},{key:"build",value:function(){var t,e=this;if(p.c()===p.b){var n=new f.a("map"),r=n.boundsSize();if(.25>r)this.api=v.DEFAULT,t=h.b(n.bounds().toBBoxString(),this.limit,this.closed,this.user,this.from,this.to,this.api);else if(.25<=r&&1>=r){this.api=v.DEFAULT,t=[],n.splitBounds(n.bounds(),1).forEach((function(n){t.push(h.b(n.toBBoxString(),e.limit,e.closed,e.user,e.from,e.to,e.api))}))}else if(1<=r&&4>=r){this.api=v.DEFAULT,t=[],n.splitBounds(n.bounds(),2).forEach((function(n){t.push(h.b(n.toBBoxString(),e.limit,e.closed,e.user,e.from,e.to,e.api))}))}else this.api=v.SEARCH,t=h.b(this.query,this.limit,this.closed,this.user,this.from,this.to,this.api)}else this.api=v.SEARCH,t=h.b(this.query,this.limit,this.closed,this.user,this.from,this.to,this.api);return t}}]),t}()},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var r=n(5),o=n(16),i=n(14),a=n(43),c=n(44),u=n(35),s=u.get,l=u.enforce,f=String(String).split("String");(t.exports=function(t,e,n,c){var u=!!c&&!!c.unsafe,s=!!c&&!!c.enumerable,p=!!c&&!!c.noTargetGet;"function"==typeof n&&("string"!=typeof e||i(n,"name")||o(n,"name",e),l(n).source=f.join("string"==typeof e?e:"")),t!==r?(u?!p&&t[e]&&(s=!0):delete t[e],s?t[e]=n:o(t,e,n)):s?t[e]=n:a(e,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&s(this).source||c(this)}))},function(t,e){t.exports=!1},function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var r,o=n(6),i=n.n(o),a=n(7),c=n.n(a),u=n(0),s=n(31),l={},f={minZoom:2,maxZoom:19,center:[0,0],zoom:2},p=function(){function t(e,n){var r=this;i()(this,t),l[e]?this.map=l[e]:(this.map=L.map(e,{minZoom:f.minZoom,maxZoom:f.maxZoom,center:f.center,zoom:f.zoom,maxBounds:L.latLngBounds(L.latLng(-90,-180),L.latLng(90,180))}),l[e]=this.map,n&&this.map.on("move",n),L.Control.geocoder&&L.Control.geocoder({placeholder:u.c("action.search"),errorMessage:u.c("description.nothingFound")}).addTo(this.map),this.tiles(),document.addEventListener("color-scheme-changed",(function(){return r.tiles()})))}return c()(t,[{key:"tiles",value:function(){r&&this.map.removeLayer(r);var t=s.b()===s.a?"dark_all":"light_all",e=L.Browser.retina?"@2x.png":".png";r=L.tileLayer("https://cartodb-basemaps-{s}.global.ssl.fastly.net/".concat(t,"/{z}/{x}/{y}").concat(e),{maxZoom:f.maxZoom,subdomains:"abcd",attribution:u.c("map.attribution")}),this.map.addLayer(r)}},{key:"addLayer",value:function(t){this.map.addLayer(t)}},{key:"removeLayers",value:function(){var t=this;this.map.eachLayer((function(e){e!==r&&t.map.removeLayer(e)}))}},{key:"marker",value:function(t){L.marker(t).addTo(this.map)}},{key:"bounds",value:function(){return this.map.getBounds()}},{key:"boundsSize",value:function(){var t=this.bounds();return(t.getNorth()-t.getSouth())*(t.getEast()-t.getWest())}},{key:"splitBounds",value:function(t,e){Array.isArray(t)||(t=[t]);for(var n,r=0;r<e;r++){n=[];for(var o=0;o<t.length;o++){var i=[],a=t[o],c=(a.getWest()+a.getEast())/2,u=(a.getSouth()+a.getNorth())/2;0<c-180?c-=360:0>c+180&&(c+=360),i.push(L.latLngBounds(L.latLng(a.getSouth(),a.getWest()),L.latLng(u,c))),i.push(L.latLngBounds(L.latLng(a.getSouth(),c),L.latLng(u,a.getEast()))),i.push(L.latLngBounds(L.latLng(u,c),L.latLng(a.getNorth(),a.getEast()))),i.push(L.latLngBounds(L.latLng(u,a.getWest()),L.latLng(a.getNorth(),c))),n=n.concat(i)}t=n}return t}},{key:"center",value:function(){return L.latLng(this.map.getCenter().lat.toFixed(4),this.map.getCenter().lng.toFixed(4))}},{key:"zoom",value:function(){return this.map.getZoom().toFixed(0)}},{key:"setView",value:function(t,e){this.map.setView(t,e)}},{key:"flyToBounds",value:function(t,e){this.map.flyToBounds(t,{duration:e,maxZoom:f.maxZoom})}}]),t}()},function(t,e,n){var r=n(56),o=n(57);t.exports=function(t){return r(o(t))}},function(t,e,n){var r=n(18),o=n(59),i=n(10),a=n(58),c=Object.defineProperty;e.f=r?c:function(t,e,n){if(i(t),e=a(e,!0),i(n),o)try{return c(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(37);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports={}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"c",(function(){return s})),n.d(e,"b",(function(){return l}));var r=n(4),o="light",i="dark",a="system",c=r.a.get("theme")||"system",u=window.matchMedia("(prefers-color-scheme: dark)");function s(t){t===c||(c=t,f(),c===a?u.addListener(f):u.removeListener(f))}function l(){return c===o?o:c===i?i:c===a&&u.matches?i:o}function f(){document.body.dataset.theme=l(),document.dispatchEvent(new Event("color-scheme-changed"))}document.body.dataset.theme=l()},function(t,e,n){var r=n(158),o=n(159);t.exports=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?o(t):e}},function(t,e,n){var r=n(93);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var r,o,i,a=n(106),c=n(5),u=n(15),s=n(16),l=n(14),f=n(45),p=n(46),d=c.WeakMap;if(a){var h=new d,m=h.get,v=h.has,y=h.set;r=function(t,e){return y.call(h,t,e),e},o=function(t){return m.call(h,t)||{}},i=function(t){return v.call(h,t)}}else{var g=f("state");p[g]=!0,r=function(t,e){return s(t,g,e),e},o=function(t){return l(t,g)?t[g]:{}},i=function(t){return l(t,g)}}t.exports={set:r,get:o,has:i,enforce:function(t){return i(t)?o(t):r(t,{})},getterFor:function(t){return function(e){var n;if(!u(e)||(n=o(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}}},function(t,e,n){var r=n(5);t.exports=r},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},function(t,e,n){var r=n(28).f,o=n(14),i=n(8)("toStringTag");t.exports=function(t,e,n){t&&!o(t=n?t:t.prototype,i)&&r(t,i,{configurable:!0,value:e})}},function(t,e,n){var r=n(160);function o(e,n,i){return"undefined"!=typeof Reflect&&Reflect.get?t.exports=o=Reflect.get:t.exports=o=function(t,e,n){var o=r(t,e);if(o){var i=Object.getOwnPropertyDescriptor(o,e);return i.get?i.get.call(n):i.value}},o(e,n,i||e)}t.exports=o},function(t,e,n){"use strict";var r=n(11),o=n.n(r),i=n(6),a=n.n(i),c=n(7),u=n.n(c),s=n(12),l=n(89),f=new(n.n(l).a),p={imgur:/(http(s)?:\/\/)?i\.imgur\.com\/\w+\.(jpg|png)/,framapic:/(http(s)?:\/\/)?(www\.)?framapic\.org\/(random\?i=)?\w+\/\w+(\.(jpg|jpeg|png))?/,westnordost:/https:\/\/westnordost\.de\/p\/[0-9]+\.jpg/,wikimedia:/https:\/\/upload\.wikimedia\.org\/wikipedia\/commons\/(?:thumb\/)?(\w\/\w\w)\/(.+?\.(?:jpg|png))(?:\/.+?\.(?:jpg|png))?/},d={wikimedia:"https://upload.wikimedia.org/wikipedia/commons/thumb/$1/$2/300px-$2"};function h(t){var e=f.match(t);if(e){var n=[],r=0;e.forEach((function(e){r<e.index&&n.push(m(t.slice(r,e.index)).replace(/\r?\n/g,"<br>"));var i=function(t){var e=!1,n=null;return Object.entries(p).forEach((function(r){var i=o()(r,2),a=i[0],c=i[1],u=d[a];c.test(t)&&(e=!0,u&&(n=t.replace(new RegExp(c.source,"gi"),u)))})),{image:e,formatted:n}}(e.url),a=i.image,c=i.formatted;c&&(e.url=c),a?n.push('\n          <a href="'.concat(m(e.url),'" target="_blank" rel="noopener noreferrer">\n            <img class="img-responsive img-preview m-1" src="').concat(m(e.url),'" alt="').concat(m(e.text),'">\n          </a>')):n.push('<a href="'.concat(m(e.url),'" target="_blank" rel="noopener noreferrer">').concat(m(e.text),"</a>")),r=e.lastIndex})),r<t.length&&n.push(m(t.slice(r)).replace(/\r?\n/g,"<br>")),t=n.join("")}else t=m(t);return t}function m(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}var v=n(0),y=n(9);n.d(e,"a",(function(){return _}));var g=[/(?:https?:\/\/)?(?:www\.)?(?:osm|openstreetmap)\.org\/(node|way|relation)\/([0-9]+)/,/(node|way|relation)\/([0-9]+)/,/(node|way|relation)(?:\\s)?#([0-9]+)/,/(n|w|r)\/([0-9]+)/],_=function(){function t(e,n){if(a()(this,t),0===e.properties.comments.length)throw new Error("Note ".concat(e.properties.id," can not be parsed because there are no comments."));this.id=e.properties.id,this.status=e.properties.status,this.coordinates=e.geometry.coordinates.reverse(),this.date=new Date(e.properties.date_created.replace(/-/g,"/")),this.color=y.e(this.date),this.comments=this.parseComments(e.properties.comments),this.users=this.comments.filter((function(t){return null!==t.uid})).map((function(t){return t.uid}));var r=o()(this.comments,1);this.comment=r[0],this.anonymous=this.comment.anonymous,this.user=this.comment.user,this.api=n,this.visible=!0}return u()(t,[{key:"parseComments",value:function(t){for(var e=0;e<t.length;e++)t[e].anonymous=!t[e].user,t[e].anonymous&&(t[e].user=v.c("note.anonymous"),t[e].uid=null),t[e].date=new Date(t[e].date.replace(/-/g,"/")),t[e].color=y.e(t[e].date),t[e].html=h(t[e].text);return t}},{key:"actions",get:function(){var t,e=this,n=y.a(this.coordinates),r={osm:{class:"link-osm",link:"".concat("https://www.openstreetmap.org","/note/").concat(this.id),icon:"icon-external",text:v.c("action.openstreetmap")},iD:{class:"link-editor-id",link:"".concat("https://www.openstreetmap.org","/edit?editor=id#map=19/").concat(this.coordinates.join("/")),icon:"icon-external",text:v.c("action.edit.id")},josm:{class:"link-editor-josm",link:"http://127.0.0.1:8111/load_and_zoom?left=".concat(n.left,"&bottom=").concat(n.bottom,"&right=").concat(n.right,"&top=").concat(n.top),icon:"icon-external",text:v.c("action.edit.josm"),remote:!0},level0:{class:"link-editor-level0",link:"http://level0.osmz.ru/?center=".concat(this.coordinates.join()),icon:"icon-external",text:v.c("action.edit.level0")},mapillary:{class:"link-tool-mapillary",icon:"icon-mapillary",text:v.c("action.mapillary")},comment:{class:"comments-modal-trigger requires-authentication",icon:"icon-pencil",text:v.c("action.comment")}};return 1<this.comments.length&&delete r.comment,g.forEach((function(n){if(!t&&((t=e.comment.html.match(n))&&1<t.length)){var i=t,a=o()(i,3),c=a[1],u=a[2];"n"===c?c="node":"w"===c?c="way":"r"===c&&(c="relation"),r.iD.link="".concat("https://www.openstreetmap.org","/edit?editor=id&").concat(c,"=").concat(u),r.josm.link+="&select=".concat(c).concat(u),r.level0.link="http://level0.osmz.ru/?url=".concat(c,"/").concat(u,"&center=").concat(e.coordinates.join())}})),Object.values(r)}},{key:"badges",get:function(){return{age:s.a(this.color,this.date),comments:s.b(this.comments.length-1),user:s.e(this.comment.uid,this.anonymous),report:s.c(this.id)}}}]),t}()},function(t,e,n){var r=n(18),o=n(55),i=n(34),a=n(27),c=n(58),u=n(14),s=n(59),l=Object.getOwnPropertyDescriptor;e.f=r?l:function(t,e){if(t=a(t),e=c(e,!0),s)try{return l(t,e)}catch(t){}if(u(t,e))return i(!o.f.call(t,e),t[e])}},function(t,e,n){var r=n(5),o=n(15),i=r.document,a=o(i)&&o(i.createElement);t.exports=function(t){return a?i.createElement(t):{}}},function(t,e,n){var r=n(5),o=n(16);t.exports=function(t,e){try{o(r,t,e)}catch(n){r[t]=e}return e}},function(t,e,n){var r=n(60),o=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(t){return o.call(t)}),t.exports=r.inspectSource},function(t,e,n){var r=n(61),o=n(62),i=r("keys");t.exports=function(t){return i[t]||(i[t]=o(t))}},function(t,e){t.exports={}},function(t,e,n){var r=n(65),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,e,n){var r=n(10),o=n(113),i=n(48),a=n(46),c=n(70),u=n(42),s=n(45)("IE_PROTO"),l=function(){},f=function(){var t,e=u("iframe"),n=i.length;for(e.style.display="none",c.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),f=t.F;n--;)delete f.prototype[i[n]];return f()};t.exports=Object.create||function(t,e){var n;return null!==t?(l.prototype=r(t),n=new l,l.prototype=null,n[s]=t):n=f(),void 0===e?n:o(n,e)},a[s]=!0},function(t,e,n){var r=n(76),o=n(30),i=n(8)("iterator");t.exports=function(t){if(null!=t)return t[i]||t["@@iterator"]||o[r(t)]}},function(t,e,n){var r=n(150),o=n(151),i=n(152);t.exports=function(t){return r(t)||o(t)||i()}},function(t,e,n){var r=n(161);r.Template=n(162).Template,r.template=r.Template,t.exports=r},function(t,e,n){var r=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,n,r){var o=e&&e.prototype instanceof m?e:m,i=Object.create(o.prototype),a=new F(r||[]);return i._invoke=function(t,e,n){var r=l;return function(o,i){if(r===p)throw new Error("Generator is already running");if(r===d){if("throw"===o)throw i;return A()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=k(a,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===l)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var u=s(t,e,n);if("normal"===u.type){if(r=n.done?d:f,u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=d,n.method="throw",n.arg=u.arg)}}}(t,n,a),i}function s(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l="suspendedStart",f="suspendedYield",p="executing",d="completed",h={};function m(){}function v(){}function y(){}var g={};g[i]=function(){return this};var _=Object.getPrototypeOf,b=_&&_(_(S([])));b&&b!==n&&r.call(b,i)&&(g=b);var w=y.prototype=m.prototype=Object.create(g);function x(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function E(t){var e;this._invoke=function(n,o){function i(){return new Promise((function(e,i){!function e(n,o,i,a){var c=s(t[n],t,o);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==typeof l&&r.call(l,"__await")?Promise.resolve(l.__await).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):Promise.resolve(l).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}a(c.arg)}(n,o,e,i)}))}return e=e?e.then(i,i):i()}}function k(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method))return h;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var o=s(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,h;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,h):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function D(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function F(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function S(t){if(t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:A}}function A(){return{value:e,done:!0}}return v.prototype=w.constructor=y,y.constructor=v,y[c]=v.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,c in t||(t[c]="GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},x(E.prototype),E.prototype[a]=function(){return this},t.AsyncIterator=E,t.async=function(e,n,r,o){var i=new E(u(e,n,r,o));return t.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},x(w),w[c]="Generator",w[i]=function(){return this},w.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=S,F.prototype={constructor:F,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(D),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),D(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;D(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:S(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}(t.exports);try{regeneratorRuntime=r}catch(t){Function("r","regeneratorRuntime = r")(r)}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";var r={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,i=o&&!r.call({1:2},1);e.f=i?function(t){var e=o(this,t);return!!e&&e.enumerable}:r},function(t,e,n){var r=n(13),o=n(23),i="".split;t.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==o(t)?i.call(t,""):Object(t)}:Object},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},function(t,e,n){var r=n(15);t.exports=function(t,e){if(!r(t))return t;var n,o;if(e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;if("function"==typeof(n=t.valueOf)&&!r(o=n.call(t)))return o;if(!e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var r=n(18),o=n(13),i=n(42);t.exports=!r&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},function(t,e,n){var r=n(5),o=n(43),i=r["__core-js_shared__"]||o("__core-js_shared__",{});t.exports=i},function(t,e,n){var r=n(25),o=n(60);(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.5.0",mode:r?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++n+r).toString(36)}},function(t,e,n){var r=n(14),o=n(27),i=n(64).indexOf,a=n(46);t.exports=function(t,e){var n,c=o(t),u=0,s=[];for(n in c)!r(a,n)&&r(c,n)&&s.push(n);for(;e.length>u;)r(c,n=e[u++])&&(~i(s,n)||s.push(n));return s}},function(t,e,n){var r=n(27),o=n(47),i=n(110),a=function(t){return function(e,n,a){var c,u=r(e),s=o(u.length),l=i(a,s);if(t&&n!=n){for(;s>l;)if((c=u[l++])!=c)return!0}else for(;s>l;l++)if((t||l in u)&&u[l]===n)return t||l||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){var r=n(13),o=/#|\.prototype\./,i=function(t,e){var n=c[a(t)];return n==s||n!=u&&("function"==typeof e?r(e):!!e)},a=i.normalize=function(t){return String(t).replace(o,".").toLowerCase()},c=i.data={},u=i.NATIVE="N",s=i.POLYFILL="P";t.exports=i},function(t,e,n){var r=n(8),o=n(49),i=n(16),a=r("unscopables"),c=Array.prototype;null==c[a]&&i(c,a,o(null)),t.exports=function(t){c[a][t]=!0}},function(t,e,n){var r=n(13);t.exports=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())}))},function(t,e,n){var r=n(63),o=n(48);t.exports=Object.keys||function(t){return r(t,o)}},function(t,e,n){var r=n(19);t.exports=r("document","documentElement")},function(t,e,n){var r=n(5),o=n(29),i=Function.call;t.exports=function(t,e,n){return o(i,r[t].prototype[e],n)}},function(t,e,n){var r=n(18),o=n(69),i=n(27),a=n(55).f,c=function(t){return function(e){for(var n,c=i(e),u=o(c),s=u.length,l=0,f=[];s>l;)n=u[l++],r&&!a.call(c,n)||f.push(t?[n,c[n]]:c[n]);return f}};t.exports={entries:c(!0),values:c(!1)}},function(t,e,n){var r=n(5);t.exports=r.Promise},function(t,e,n){var r=n(24);t.exports=function(t,e,n){for(var o in e)r(t,o,e[o],n);return t}},function(t,e){t.exports=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}},function(t,e,n){var r=n(123),o=n(23),i=n(8)("toStringTag"),a="Arguments"==o(function(){return arguments}());t.exports=r?o:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),i))?n:a?o(e):"Object"==(r=o(e))&&"function"==typeof e.callee?"Arguments":r}},function(t,e,n){var r=n(10),o=n(37),i=n(8)("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||null==(n=r(a)[i])?e:o(n)}},function(t,e,n){var r,o,i,a=n(5),c=n(13),u=n(23),s=n(29),l=n(70),f=n(42),p=n(79),d=a.location,h=a.setImmediate,m=a.clearImmediate,v=a.process,y=a.MessageChannel,g=a.Dispatch,_=0,b={},w=function(t){if(b.hasOwnProperty(t)){var e=b[t];delete b[t],e()}},x=function(t){return function(){w(t)}},E=function(t){w(t.data)},k=function(t){a.postMessage(t+"",d.protocol+"//"+d.host)};h&&m||(h=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return b[++_]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},r(_),_},m=function(t){delete b[t]},"process"==u(v)?r=function(t){v.nextTick(x(t))}:g&&g.now?r=function(t){g.now(x(t))}:y&&!p?(i=(o=new y).port2,o.port1.onmessage=E,r=s(i.postMessage,i,1)):!a.addEventListener||"function"!=typeof postMessage||a.importScripts||c(k)?r="onreadystatechange"in f("script")?function(t){l.appendChild(f("script")).onreadystatechange=function(){l.removeChild(this),w(t)}}:function(t){setTimeout(x(t),0)}:(r=k,a.addEventListener("message",E,!1))),t.exports={set:h,clear:m}},function(t,e,n){var r=n(80);t.exports=/(iphone|ipod|ipad).*applewebkit/i.test(r)},function(t,e,n){var r=n(19);t.exports=r("navigator","userAgent")||""},function(t,e,n){var r=n(10),o=n(15),i=n(82);t.exports=function(t,e){if(r(t),o(e)&&e.constructor===t)return e;var n=i.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){"use strict";var r=n(37),o=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=r(e),this.reject=r(n)};t.exports.f=function(t){return new o(t)}},function(t,e,n){"use strict";var r=n(134).forEach,o=n(137);t.exports=o("forEach")?function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}:[].forEach},function(t,e,n){var r=n(57);t.exports=function(t){return Object(r(t))}},function(t,e,n){"use strict";var r=n(86).IteratorPrototype,o=n(49),i=n(34),a=n(38),c=n(30),u=function(){return this};t.exports=function(t,e,n){var s=e+" Iterator";return t.prototype=o(r,{next:i(1,n)}),a(t,s,!1,!0),c[s]=u,t}},function(t,e,n){"use strict";var r,o,i,a=n(87),c=n(16),u=n(14),s=n(8),l=n(25),f=s("iterator"),p=!1;[].keys&&("next"in(i=[].keys())?(o=a(a(i)))!==Object.prototype&&(r=o):p=!0),null==r&&(r={}),l||u(r,f)||c(r,f,(function(){return this})),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:p}},function(t,e,n){var r=n(14),o=n(84),i=n(45),a=n(142),c=i("IE_PROTO"),u=Object.prototype;t.exports=a?Object.getPrototypeOf:function(t){return t=o(t),r(t,c)?t[c]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,e,n){var r={"./de":[95,0],"./de.json":[95,0],"./en":[96,1],"./en.json":[96,1],"./es":[97,2],"./es.json":[97,2],"./it":[98,3],"./it.json":[98,3]};function o(t){if(!n.o(r,t))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=r[t],o=e[0];return n.e(e[1]).then((function(){return n.t(o,3)}))}o.keys=function(){return Object.keys(r)},o.id=88,t.exports=o},function(t,e,n){"use strict";function r(t){return Array.prototype.slice.call(arguments,1).forEach((function(e){e&&Object.keys(e).forEach((function(n){t[n]=e[n]}))})),t}function o(t){return Object.prototype.toString.call(t)}function i(t){return"[object Function]"===o(t)}function a(t){return t.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var c={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};var u={"http:":{validate:function(t,e,n){var r=t.slice(e);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(t,e,n){var r=t.slice(e);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?e>=3&&":"===t[e-3]?0:e>=3&&"/"===t[e-3]?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(t,e,n){var r=t.slice(e);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},s="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",l="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|рф".split("|");function f(t){var e=t.re=n(153)(t.__opts__),r=t.__tlds__.slice();function c(t){return t.replace("%TLDS%",e.src_tlds)}t.onCompile(),t.__tlds_replaced__||r.push(s),r.push(e.src_xn),e.src_tlds=r.join("|"),e.email_fuzzy=RegExp(c(e.tpl_email_fuzzy),"i"),e.link_fuzzy=RegExp(c(e.tpl_link_fuzzy),"i"),e.link_no_ip_fuzzy=RegExp(c(e.tpl_link_no_ip_fuzzy),"i"),e.host_fuzzy_test=RegExp(c(e.tpl_host_fuzzy_test),"i");var u=[];function l(t,e){throw new Error('(LinkifyIt) Invalid schema "'+t+'": '+e)}t.__compiled__={},Object.keys(t.__schemas__).forEach((function(e){var n=t.__schemas__[e];if(null!==n){var r={validate:null,link:null};if(t.__compiled__[e]=r,"[object Object]"===o(n))return!function(t){return"[object RegExp]"===o(t)}(n.validate)?i(n.validate)?r.validate=n.validate:l(e,n):r.validate=function(t){return function(e,n){var r=e.slice(n);return t.test(r)?r.match(t)[0].length:0}}(n.validate),void(i(n.normalize)?r.normalize=n.normalize:n.normalize?l(e,n):r.normalize=function(t,e){e.normalize(t)});!function(t){return"[object String]"===o(t)}(n)?l(e,n):u.push(e)}})),u.forEach((function(e){t.__compiled__[t.__schemas__[e]]&&(t.__compiled__[e].validate=t.__compiled__[t.__schemas__[e]].validate,t.__compiled__[e].normalize=t.__compiled__[t.__schemas__[e]].normalize)})),t.__compiled__[""]={validate:null,normalize:function(t,e){e.normalize(t)}};var f=Object.keys(t.__compiled__).filter((function(e){return e.length>0&&t.__compiled__[e]})).map(a).join("|");t.re.schema_test=RegExp("(^|(?!_)(?:[><｜]|"+e.src_ZPCc+"))("+f+")","i"),t.re.schema_search=RegExp("(^|(?!_)(?:[><｜]|"+e.src_ZPCc+"))("+f+")","ig"),t.re.pretest=RegExp("("+t.re.schema_test.source+")|("+t.re.host_fuzzy_test.source+")|@","i"),function(t){t.__index__=-1,t.__text_cache__=""}(t)}function p(t,e){var n=t.__index__,r=t.__last_index__,o=t.__text_cache__.slice(n,r);this.schema=t.__schema__.toLowerCase(),this.index=n+e,this.lastIndex=r+e,this.raw=o,this.text=o,this.url=o}function d(t,e){var n=new p(t,e);return t.__compiled__[n.schema].normalize(n,t),n}function h(t,e){if(!(this instanceof h))return new h(t,e);var n;e||(n=t,Object.keys(n||{}).reduce((function(t,e){return t||c.hasOwnProperty(e)}),!1)&&(e=t,t={})),this.__opts__=r({},c,e),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=r({},u,t),this.__compiled__={},this.__tlds__=l,this.__tlds_replaced__=!1,this.re={},f(this)}h.prototype.add=function(t,e){return this.__schemas__[t]=e,f(this),this},h.prototype.set=function(t){return this.__opts__=r(this.__opts__,t),this},h.prototype.test=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return!1;var e,n,r,o,i,a,c,u;if(this.re.schema_test.test(t))for((c=this.re.schema_search).lastIndex=0;null!==(e=c.exec(t));)if(o=this.testSchemaAt(t,e[2],c.lastIndex)){this.__schema__=e[2],this.__index__=e.index+e[1].length,this.__last_index__=e.index+e[0].length+o;break}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(u=t.search(this.re.host_fuzzy_test))>=0&&(this.__index__<0||u<this.__index__)&&null!==(n=t.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))&&(i=n.index+n[1].length,(this.__index__<0||i<this.__index__)&&(this.__schema__="",this.__index__=i,this.__last_index__=n.index+n[0].length)),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&t.indexOf("@")>=0&&null!==(r=t.match(this.re.email_fuzzy))&&(i=r.index+r[1].length,a=r.index+r[0].length,(this.__index__<0||i<this.__index__||i===this.__index__&&a>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=i,this.__last_index__=a)),this.__index__>=0},h.prototype.pretest=function(t){return this.re.pretest.test(t)},h.prototype.testSchemaAt=function(t,e,n){return this.__compiled__[e.toLowerCase()]?this.__compiled__[e.toLowerCase()].validate(t,n,this):0},h.prototype.match=function(t){var e=0,n=[];this.__index__>=0&&this.__text_cache__===t&&(n.push(d(this,e)),e=this.__last_index__);for(var r=e?t.slice(e):t;this.test(r);)n.push(d(this,e)),r=r.slice(this.__last_index__),e+=this.__last_index__;return n.length?n:null},h.prototype.tlds=function(t,e){return t=Array.isArray(t)?t:[t],e?(this.__tlds__=this.__tlds__.concat(t).sort().filter((function(t,e,n){return t!==n[e-1]})).reverse(),f(this),this):(this.__tlds__=t.slice(),this.__tlds_replaced__=!0,f(this),this)},h.prototype.normalize=function(t){t.schema||(t.url="http://"+t.url),"mailto:"!==t.schema||/^mailto:/i.test(t.url)||(t.url="mailto:"+t.url)},h.prototype.onCompile=function(){},t.exports=h},function(t,e,n){var r=n(52);t.exports=function(){var t=new r.Template({code:function(t,e,n){var r=this;return r.b(n=n||""),r.s(r.f("comments",t,e,1),t,e,0,13,233,"{{ }}")&&(r.rs(t,e,(function(t,e,n){n.b(' <div class="tile"><div class="tile-content"><div class="tile-title"> '),n.b(n.t(n.d("badges.user",t,e,0))),n.b(" "),n.b(n.t(n.d("badges.age",t,e,0))),n.b(" "),n.b(n.t(n.d("badges.status",t,e,0))),n.b('</div><p class="tile-subtitle text-break">'),n.b(n.t(n.f("html",t,e,0))),n.b('</p></div></div><div class="divider"></div> ')})),t.pop()),r.fl()},partials:{},subs:{}},'{{#comments}} <div class="tile"><div class="tile-content"><div class="tile-title"> {{{badges.user}}} {{{badges.age}}} {{{badges.status}}}</div><p class="tile-subtitle text-break">{{{html}}}</p></div></div><div class="divider"></div> {{/comments}}',r);return t.render.apply(t,arguments)}},function(t,e,n){var r=n(52);t.exports=function(){var t=new r.Template({code:function(t,e,n){var r=this;return r.b(n=n||""),r.s(r.d("images.length",t,e,1),t,e,0,18,708,"{{ }}")&&(r.rs(t,e,(function(t,e,n){n.b(" "),n.s(n.f("images",t,e,1),t,e,0,30,696,"{{ }}")&&(n.rs(t,e,(function(t,e,n){n.b(' <div class="column col-4 col-md-6 my-1"><div class="mapillary-image p-relative"><img src="https://images.mapillary.com/'),n.b(n.v(n.f("key",t,e,0))),n.b('/thumb-320.jpg" class="img-responsive" width="320" height="240"> <a class="mapillary-image-link p-absolute px-2" href="https://www.mapillary.com/app/?pKey='),n.b(n.v(n.f("key",t,e,0))),n.b('" target="_blank" rel="noopener"><img src="'),n.s(n.f("expert",t,e,1),t,e,0,373,376,"{{ }}")&&(n.rs(t,e,(function(t,e,n){n.b("../")})),t.pop()),n.b('assets/logos/mapillary.svg"></a><p class="mapillary-image-user p-absolute px-2 bg-dark">@'),n.b(n.v(n.f("user",t,e,0))),n.b(' <a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener"><abbr title="Creative Commons Attribution-ShareAlike 4.0 International License">(CC BY-SA 4.0)</abbr></a></p></div></div> ')})),t.pop()),n.b(" ")})),t.pop()),r.b(" "),r.s(r.d("images.length",t,e,1),t,e,1,0,0,"")||(r.b(' <div class="empty col-12"><div class="empty-icon"></div><p class="empty-title h5" data-i18n="mapillary.empty.title">There are no photos of this place yet</p><p class="empty-subtitle" data-i18n="mapillary.empty.subtitle">You can help other mappers by uploading street-level imagery to Mapillary.</p><div class="empty-action"><a class="btn btn-primary" href="'),r.b(r.v(r.f("link",t,e,0))),r.b('" target="_blank" rel="noopener"><span class="icon icon-mapillary"></span> <span data-i18n="mapillary.empty.add">Add photos of this place</span></a></div></div> ')),r.fl()},partials:{},subs:{}},'{{#images.length}} {{#images}} <div class="column col-4 col-md-6 my-1"><div class="mapillary-image p-relative"><img src="https://images.mapillary.com/{{key}}/thumb-320.jpg" class="img-responsive" width="320" height="240"> <a class="mapillary-image-link p-absolute px-2" href="https://www.mapillary.com/app/?pKey={{key}}" target="_blank" rel="noopener"><img src="{{#expert}}../{{/expert}}assets/logos/mapillary.svg"></a><p class="mapillary-image-user p-absolute px-2 bg-dark">@{{user}} <a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener"><abbr title="Creative Commons Attribution-ShareAlike 4.0 International License">(CC BY-SA 4.0)</abbr></a></p></div></div> {{/images}} {{/images.length}} {{^images.length}} <div class="empty col-12"><div class="empty-icon"></div><p class="empty-title h5" data-i18n="mapillary.empty.title">There are no photos of this place yet</p><p class="empty-subtitle" data-i18n="mapillary.empty.subtitle">You can help other mappers by uploading street-level imagery to Mapillary.</p><div class="empty-action"><a class="btn btn-primary" href="{{link}}" target="_blank" rel="noopener"><span class="icon icon-mapillary"></span> <span data-i18n="mapillary.empty.add">Add photos of this place</span></a></div></div> {{/images.length}}',r);return t.render.apply(t,arguments)}},,function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(e,r)}t.exports=n},,,,,,,,function(t,e,n){n(102),t.exports=n(164)},function(t,e,n){},function(t,e,n){(function(r){var o,i;void 0===(i="function"==typeof(o=function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=o(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}var u=function(){function e(){t(this,e),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return n(e,[{key:"addEventListener",value:function(t,e){t in this.listeners||(this.listeners[t]=[]),this.listeners[t].push(e)}},{key:"removeEventListener",value:function(t,e){if(t in this.listeners)for(var n=this.listeners[t],r=0,o=n.length;r<o;r++)if(n[r]===e)return void n.splice(r,1)}},{key:"dispatchEvent",value:function(t){var e=this;if(t.type in this.listeners){for(var n=function(n){setTimeout((function(){return n.call(e,t)}))},r=this.listeners[t.type],o=0,i=r.length;o<i;o++)n(r[o]);return!t.defaultPrevented}}}]),e}(),s=function(e){function r(){var e;return t(this,r),(e=function(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?a(t):e}(this,o(r).call(this))).listeners||u.call(a(e)),Object.defineProperty(a(e),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(a(e),"onabort",{value:null,writable:!0,configurable:!0}),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}(r,e),n(r,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(t){"abort"===t.type&&(this.aborted=!0,"function"==typeof this.onabort&&this.onabort.call(this,t)),c(o(r.prototype),"dispatchEvent",this).call(this,t)}}]),r}(u),l=function(){function e(){t(this,e),Object.defineProperty(this,"signal",{value:new s,writable:!0,configurable:!0})}return n(e,[{key:"abort",value:function(){var t;try{t=new Event("abort")}catch(e){"undefined"!=typeof document?document.createEvent?(t=document.createEvent("Event")).initEvent("abort",!1,!1):(t=document.createEventObject()).type="abort":t={type:"abort",bubbles:!1,cancelable:!1}}this.signal.dispatchEvent(t)}},{key:"toString",value:function(){return"[object AbortController]"}}]),e}();"undefined"!=typeof Symbol&&Symbol.toStringTag&&(l.prototype[Symbol.toStringTag]="AbortController",s.prototype[Symbol.toStringTag]="AbortSignal"),function(t){(function(t){return t.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),!0):"function"==typeof t.Request&&!t.Request.prototype.hasOwnProperty("signal")||!t.AbortController})(t)&&(t.AbortController=l,t.AbortSignal=s)}("undefined"!=typeof self?self:r)})?o.call(e,n,e,t):o)||(t.exports=i)}).call(this,n(54))},function(t,e,n){n(105);var r=n(71);t.exports=r("Array","includes")},function(t,e,n){"use strict";var r=n(17),o=n(64).includes,i=n(67);r({target:"Array",proto:!0},{includes:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),i("includes")},function(t,e,n){var r=n(5),o=n(44),i=r.WeakMap;t.exports="function"==typeof i&&/native code/.test(o(i))},function(t,e,n){var r=n(14),o=n(108),i=n(41),a=n(28);t.exports=function(t,e){for(var n=o(e),c=a.f,u=i.f,s=0;s<n.length;s++){var l=n[s];r(t,l)||c(t,l,u(e,l))}}},function(t,e,n){var r=n(19),o=n(109),i=n(111),a=n(10);t.exports=r("Reflect","ownKeys")||function(t){var e=o.f(a(t)),n=i.f;return n?e.concat(n(t)):e}},function(t,e,n){var r=n(63),o=n(48).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},function(t,e,n){var r=n(65),o=Math.max,i=Math.min;t.exports=function(t,e){var n=r(t);return n<0?o(n+e,0):i(n,e)}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var r=n(68);t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol()},function(t,e,n){var r=n(18),o=n(28),i=n(10),a=n(69);t.exports=r?Object.defineProperties:function(t,e){i(t);for(var n,r=a(e),c=r.length,u=0;c>u;)o.f(t,n=r[u++],e[n]);return t}},function(t,e,n){n(115);var r=n(36);t.exports=r.Object.entries},function(t,e,n){var r=n(17),o=n(72).entries;r({target:"Object",stat:!0},{entries:function(t){return o(t)}})},function(t,e,n){n(117);var r=n(36);t.exports=r.Object.values},function(t,e,n){var r=n(17),o=n(72).values;r({target:"Object",stat:!0},{values:function(t){return o(t)}})},function(t,e,n){n(119),n(130);var r=n(71);t.exports=r("Promise","finally")},function(t,e,n){"use strict";var r,o,i,a,c=n(17),u=n(25),s=n(5),l=n(19),f=n(73),p=n(24),d=n(74),h=n(38),m=n(120),v=n(15),y=n(37),g=n(75),_=n(23),b=n(44),w=n(121),x=n(125),E=n(77),k=n(78).set,L=n(126),D=n(81),F=n(127),S=n(82),A=n(128),j=n(35),B=n(66),I=n(8),O=n(129),C=I("species"),T="Promise",P=j.get,z=j.set,R=j.getterFor(T),M=f,N=s.TypeError,U=s.document,Z=s.process,q=l("fetch"),G=S.f,$=G,H="process"==_(Z),V=!!(U&&U.createEvent&&s.dispatchEvent),J=B(T,(function(){if(!(b(M)!==String(M))){if(66===O)return!0;if(!H&&"function"!=typeof PromiseRejectionEvent)return!0}if(u&&!M.prototype.finally)return!0;if(O>=51&&/native code/.test(M))return!1;var t=M.resolve(1),e=function(t){t((function(){}),(function(){}))};return(t.constructor={})[C]=e,!(t.then((function(){}))instanceof e)})),Y=J||!x((function(t){M.all(t).catch((function(){}))})),W=function(t){var e;return!(!v(t)||"function"!=typeof(e=t.then))&&e},K=function(t,e,n){if(!e.notified){e.notified=!0;var r=e.reactions;L((function(){for(var o=e.value,i=1==e.state,a=0;r.length>a;){var c,u,s,l=r[a++],f=i?l.ok:l.fail,p=l.resolve,d=l.reject,h=l.domain;try{f?(i||(2===e.rejection&&et(t,e),e.rejection=1),!0===f?c=o:(h&&h.enter(),c=f(o),h&&(h.exit(),s=!0)),c===l.promise?d(N("Promise-chain cycle")):(u=W(c))?u.call(c,p,d):p(c)):d(o)}catch(t){h&&!s&&h.exit(),d(t)}}e.reactions=[],e.notified=!1,n&&!e.rejection&&X(t,e)}))}},Q=function(t,e,n){var r,o;V?((r=U.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),s.dispatchEvent(r)):r={promise:e,reason:n},(o=s["on"+t])?o(r):"unhandledrejection"===t&&F("Unhandled promise rejection",n)},X=function(t,e){k.call(s,(function(){var n,r=e.value;if(tt(e)&&(n=A((function(){H?Z.emit("unhandledRejection",r,t):Q("unhandledrejection",t,r)})),e.rejection=H||tt(e)?2:1,n.error))throw n.value}))},tt=function(t){return 1!==t.rejection&&!t.parent},et=function(t,e){k.call(s,(function(){H?Z.emit("rejectionHandled",t):Q("rejectionhandled",t,e.value)}))},nt=function(t,e,n,r){return function(o){t(e,n,o,r)}},rt=function(t,e,n,r){e.done||(e.done=!0,r&&(e=r),e.value=n,e.state=2,K(t,e,!0))},ot=function(t,e,n,r){if(!e.done){e.done=!0,r&&(e=r);try{if(t===n)throw N("Promise can't be resolved itself");var o=W(n);o?L((function(){var r={done:!1};try{o.call(n,nt(ot,t,r,e),nt(rt,t,r,e))}catch(n){rt(t,r,n,e)}})):(e.value=n,e.state=1,K(t,e,!1))}catch(n){rt(t,{done:!1},n,e)}}};J&&(M=function(t){g(this,M,T),y(t),r.call(this);var e=P(this);try{t(nt(ot,this,e),nt(rt,this,e))}catch(t){rt(this,e,t)}},(r=function(t){z(this,{type:T,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=d(M.prototype,{then:function(t,e){var n=R(this),r=G(E(this,M));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=H?Z.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&K(this,n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new r,e=P(t);this.promise=t,this.resolve=nt(ot,t,e),this.reject=nt(rt,t,e)},S.f=G=function(t){return t===M||t===i?new o(t):$(t)},u||"function"!=typeof f||(a=f.prototype.then,p(f.prototype,"then",(function(t,e){var n=this;return new M((function(t,e){a.call(n,t,e)})).then(t,e)}),{unsafe:!0}),"function"==typeof q&&c({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return D(M,q.apply(s,arguments))}}))),c({global:!0,wrap:!0,forced:J},{Promise:M}),h(M,T,!1,!0),m(T),i=l(T),c({target:T,stat:!0,forced:J},{reject:function(t){var e=G(this);return e.reject.call(void 0,t),e.promise}}),c({target:T,stat:!0,forced:u||J},{resolve:function(t){return D(u&&this===i?M:this,t)}}),c({target:T,stat:!0,forced:Y},{all:function(t){var e=this,n=G(e),r=n.resolve,o=n.reject,i=A((function(){var n=y(e.resolve),i=[],a=0,c=1;w(t,(function(t){var u=a++,s=!1;i.push(void 0),c++,n.call(e,t).then((function(t){s||(s=!0,i[u]=t,--c||r(i))}),o)})),--c||r(i)}));return i.error&&o(i.value),n.promise},race:function(t){var e=this,n=G(e),r=n.reject,o=A((function(){var o=y(e.resolve);w(t,(function(t){o.call(e,t).then(n.resolve,r)}))}));return o.error&&r(o.value),n.promise}})},function(t,e,n){"use strict";var r=n(19),o=n(28),i=n(8),a=n(18),c=i("species");t.exports=function(t){var e=r(t),n=o.f;a&&e&&!e[c]&&n(e,c,{configurable:!0,get:function(){return this}})}},function(t,e,n){var r=n(10),o=n(122),i=n(47),a=n(29),c=n(50),u=n(124),s=function(t,e){this.stopped=t,this.result=e};(t.exports=function(t,e,n,l,f){var p,d,h,m,v,y,g,_=a(e,n,l?2:1);if(f)p=t;else{if("function"!=typeof(d=c(t)))throw TypeError("Target is not iterable");if(o(d)){for(h=0,m=i(t.length);m>h;h++)if((v=l?_(r(g=t[h])[0],g[1]):_(t[h]))&&v instanceof s)return v;return new s(!1)}p=d.call(t)}for(y=p.next;!(g=y.call(p)).done;)if("object"==typeof(v=u(p,_,g.value,l))&&v&&v instanceof s)return v;return new s(!1)}).stop=function(t){return new s(!0,t)}},function(t,e,n){var r=n(8),o=n(30),i=r("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(o.Array===t||a[i]===t)}},function(t,e,n){var r={};r[n(8)("toStringTag")]="z",t.exports="[object z]"===String(r)},function(t,e,n){var r=n(10);t.exports=function(t,e,n,o){try{return o?e(r(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&r(i.call(t)),e}}},function(t,e,n){var r=n(8)("iterator"),o=!1;try{var i=0,a={next:function(){return{done:!!i++}},return:function(){o=!0}};a[r]=function(){return this},Array.from(a,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!o)return!1;var n=!1;try{var i={};i[r]=function(){return{next:function(){return{done:n=!0}}}},t(i)}catch(t){}return n}},function(t,e,n){var r,o,i,a,c,u,s,l,f=n(5),p=n(41).f,d=n(23),h=n(78).set,m=n(79),v=f.MutationObserver||f.WebKitMutationObserver,y=f.process,g=f.Promise,_="process"==d(y),b=p(f,"queueMicrotask"),w=b&&b.value;w||(r=function(){var t,e;for(_&&(t=y.domain)&&t.exit();o;){e=o.fn,o=o.next;try{e()}catch(t){throw o?a():i=void 0,t}}i=void 0,t&&t.enter()},_?a=function(){y.nextTick(r)}:v&&!m?(c=!0,u=document.createTextNode(""),new v(r).observe(u,{characterData:!0}),a=function(){u.data=c=!c}):g&&g.resolve?(s=g.resolve(void 0),l=s.then,a=function(){l.call(s,r)}):a=function(){h.call(f,r)}),t.exports=w||function(t){var e={fn:t,next:void 0};i&&(i.next=e),o||(o=e,a()),i=e}},function(t,e,n){var r=n(5);t.exports=function(t,e){var n=r.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}},function(t,e){t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},function(t,e,n){var r,o,i=n(5),a=n(80),c=i.process,u=c&&c.versions,s=u&&u.v8;s?o=(r=s.split("."))[0]+r[1]:a&&(!(r=a.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/))&&(o=r[1]),t.exports=o&&+o},function(t,e,n){"use strict";var r=n(17),o=n(25),i=n(73),a=n(13),c=n(19),u=n(77),s=n(81),l=n(24);r({target:"Promise",proto:!0,real:!0,forced:!!i&&a((function(){i.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(t){var e=u(this,c("Promise")),n="function"==typeof t;return this.then(n?function(n){return s(e,t()).then((function(){return n}))}:t,n?function(n){return s(e,t()).then((function(){throw n}))}:t)}}),o||"function"!=typeof i||i.prototype.finally||l(i.prototype,"finally",c("Promise").prototype.finally)},function(t,e,n){n(132);var r=n(83);t.exports=r},function(t,e,n){var r=n(5),o=n(133),i=n(83),a=n(16);for(var c in o){var u=r[c],s=u&&u.prototype;if(s&&s.forEach!==i)try{a(s,"forEach",i)}catch(t){s.forEach=i}}},function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(t,e,n){var r=n(29),o=n(56),i=n(84),a=n(47),c=n(135),u=[].push,s=function(t){var e=1==t,n=2==t,s=3==t,l=4==t,f=6==t,p=5==t||f;return function(d,h,m,v){for(var y,g,_=i(d),b=o(_),w=r(h,m,3),x=a(b.length),E=0,k=v||c,L=e?k(d,x):n?k(d,0):void 0;x>E;E++)if((p||E in b)&&(g=w(y=b[E],E,_),t))if(e)L[E]=g;else if(g)switch(t){case 3:return!0;case 5:return y;case 6:return E;case 2:u.call(L,y)}else if(l)return!1;return f?-1:s||l?l:L}};t.exports={forEach:s(0),map:s(1),filter:s(2),some:s(3),every:s(4),find:s(5),findIndex:s(6)}},function(t,e,n){var r=n(15),o=n(136),i=n(8)("species");t.exports=function(t,e){var n;return o(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!o(n.prototype)?r(n)&&null===(n=n[i])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}},function(t,e,n){var r=n(23);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){"use strict";var r=n(13);t.exports=function(t,e){var n=[][t];return!n||!r((function(){n.call(null,e||function(){throw 1},1)}))}},function(t,e,n){n(139);var r=n(36);t.exports=r.URLSearchParams},function(t,e,n){"use strict";n(140);var r=n(17),o=n(19),i=n(145),a=n(24),c=n(74),u=n(38),s=n(85),l=n(35),f=n(75),p=n(14),d=n(29),h=n(76),m=n(10),v=n(15),y=n(49),g=n(34),_=n(146),b=n(50),w=n(8),x=o("fetch"),E=o("Headers"),k=w("iterator"),L=l.set,D=l.getterFor("URLSearchParams"),F=l.getterFor("URLSearchParamsIterator"),S=/\+/g,A=Array(4),j=function(t){return A[t-1]||(A[t-1]=RegExp("((?:%[\\da-f]{2}){"+t+"})","gi"))},B=function(t){try{return decodeURIComponent(t)}catch(e){return t}},I=function(t){var e=t.replace(S," "),n=4;try{return decodeURIComponent(e)}catch(t){for(;n;)e=e.replace(j(n--),B);return e}},O=/[!'()~]|%20/g,C={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},T=function(t){return C[t]},P=function(t){return encodeURIComponent(t).replace(O,T)},z=function(t,e){if(e)for(var n,r,o=e.split("&"),i=0;i<o.length;)(n=o[i++]).length&&(r=n.split("="),t.push({key:I(r.shift()),value:I(r.join("="))}))},R=function(t){this.entries.length=0,z(this.entries,t)},M=function(t,e){if(t<e)throw TypeError("Not enough arguments")},N=s((function(t,e){L(this,{type:"URLSearchParamsIterator",iterator:_(D(t).entries),kind:e})}),"Iterator",(function(){var t=F(this),e=t.kind,n=t.iterator.next(),r=n.value;return n.done||(n.value="keys"===e?r.key:"values"===e?r.value:[r.key,r.value]),n})),U=function(){f(this,U,"URLSearchParams");var t,e,n,r,o,i,a,c,u,s=arguments.length>0?arguments[0]:void 0,l=this,d=[];if(L(l,{type:"URLSearchParams",entries:d,updateURL:function(){},updateSearchParams:R}),void 0!==s)if(v(s))if("function"==typeof(t=b(s)))for(n=(e=t.call(s)).next;!(r=n.call(e)).done;){if((a=(i=(o=_(m(r.value))).next).call(o)).done||(c=i.call(o)).done||!i.call(o).done)throw TypeError("Expected sequence with length 2");d.push({key:a.value+"",value:c.value+""})}else for(u in s)p(s,u)&&d.push({key:u,value:s[u]+""});else z(d,"string"==typeof s?"?"===s.charAt(0)?s.slice(1):s:s+"")},Z=U.prototype;c(Z,{append:function(t,e){M(arguments.length,2);var n=D(this);n.entries.push({key:t+"",value:e+""}),n.updateURL()},delete:function(t){M(arguments.length,1);for(var e=D(this),n=e.entries,r=t+"",o=0;o<n.length;)n[o].key===r?n.splice(o,1):o++;e.updateURL()},get:function(t){M(arguments.length,1);for(var e=D(this).entries,n=t+"",r=0;r<e.length;r++)if(e[r].key===n)return e[r].value;return null},getAll:function(t){M(arguments.length,1);for(var e=D(this).entries,n=t+"",r=[],o=0;o<e.length;o++)e[o].key===n&&r.push(e[o].value);return r},has:function(t){M(arguments.length,1);for(var e=D(this).entries,n=t+"",r=0;r<e.length;)if(e[r++].key===n)return!0;return!1},set:function(t,e){M(arguments.length,1);for(var n,r=D(this),o=r.entries,i=!1,a=t+"",c=e+"",u=0;u<o.length;u++)(n=o[u]).key===a&&(i?o.splice(u--,1):(i=!0,n.value=c));i||o.push({key:a,value:c}),r.updateURL()},sort:function(){var t,e,n,r=D(this),o=r.entries,i=o.slice();for(o.length=0,n=0;n<i.length;n++){for(t=i[n],e=0;e<n;e++)if(o[e].key>t.key){o.splice(e,0,t);break}e===n&&o.push(t)}r.updateURL()},forEach:function(t){for(var e,n=D(this).entries,r=d(t,arguments.length>1?arguments[1]:void 0,3),o=0;o<n.length;)r((e=n[o++]).value,e.key,this)},keys:function(){return new N(this,"keys")},values:function(){return new N(this,"values")},entries:function(){return new N(this,"entries")}},{enumerable:!0}),a(Z,k,Z.entries),a(Z,"toString",(function(){for(var t,e=D(this).entries,n=[],r=0;r<e.length;)t=e[r++],n.push(P(t.key)+"="+P(t.value));return n.join("&")}),{enumerable:!0}),u(U,"URLSearchParams"),r({global:!0,forced:!i},{URLSearchParams:U}),i||"function"!=typeof x||"function"!=typeof E||r({global:!0,enumerable:!0,forced:!0},{fetch:function(t){var e,n,r,o=[t];return arguments.length>1&&(e=arguments[1],v(e)&&(n=e.body,"URLSearchParams"===h(n)&&((r=e.headers?new E(e.headers):new E).has("content-type")||r.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),e=y(e,{body:g(0,String(n)),headers:g(0,r)}))),o.push(e)),x.apply(this,o)}}),t.exports={URLSearchParams:U,getState:D}},function(t,e,n){"use strict";var r=n(27),o=n(67),i=n(30),a=n(35),c=n(141),u=a.set,s=a.getterFor("Array Iterator");t.exports=c(Array,"Array",(function(t,e){u(this,{type:"Array Iterator",target:r(t),index:0,kind:e})}),(function(){var t=s(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values"),i.Arguments=i.Array,o("keys"),o("values"),o("entries")},function(t,e,n){"use strict";var r=n(17),o=n(85),i=n(87),a=n(143),c=n(38),u=n(16),s=n(24),l=n(8),f=n(25),p=n(30),d=n(86),h=d.IteratorPrototype,m=d.BUGGY_SAFARI_ITERATORS,v=l("iterator"),y=function(){return this};t.exports=function(t,e,n,l,d,g,_){o(n,e,l);var b,w,x,E=function(t){if(t===d&&S)return S;if(!m&&t in D)return D[t];switch(t){case"keys":case"values":case"entries":return function(){return new n(this,t)}}return function(){return new n(this)}},k=e+" Iterator",L=!1,D=t.prototype,F=D[v]||D["@@iterator"]||d&&D[d],S=!m&&F||E(d),A="Array"==e&&D.entries||F;if(A&&(b=i(A.call(new t)),h!==Object.prototype&&b.next&&(f||i(b)===h||(a?a(b,h):"function"!=typeof b[v]&&u(b,v,y)),c(b,k,!0,!0),f&&(p[k]=y))),"values"==d&&F&&"values"!==F.name&&(L=!0,S=function(){return F.call(this)}),f&&!_||D[v]===S||u(D,v,S),p[e]=S,d)if(w={values:E("values"),keys:g?S:E("keys"),entries:E("entries")},_)for(x in w)!m&&!L&&x in D||s(D,x,w[x]);else r({target:e,proto:!0,forced:m||L},w);return w}},function(t,e,n){var r=n(13);t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},function(t,e,n){var r=n(10),o=n(144);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,i){return r(n),o(i),e?t.call(n,i):n.__proto__=i,n}}():void 0)},function(t,e,n){var r=n(15);t.exports=function(t){if(!r(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},function(t,e,n){var r=n(13),o=n(8),i=n(25),a=o("iterator");t.exports=!r((function(){var t=new URL("b?a=1&b=2&c=3","http://a"),e=t.searchParams,n="";return t.pathname="c%20d",e.forEach((function(t,r){e.delete("b"),n+=r+t})),i&&!t.toJSON||!e.sort||"http://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},function(t,e,n){var r=n(10),o=n(50);t.exports=function(t){var e=o(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return r(e.call(t))}},function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(t,e){t.exports=function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}},function(t,e){t.exports=function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(t,e,n){"use strict";t.exports=function(t){var e={};e.src_Any=n(154).source,e.src_Cc=n(155).source,e.src_Z=n(156).source,e.src_P=n(157).source,e.src_ZPCc=[e.src_Z,e.src_P,e.src_Cc].join("|"),e.src_ZCc=[e.src_Z,e.src_Cc].join("|");return e.src_pseudo_letter="(?:(?![><｜]|"+e.src_ZPCc+")"+e.src_Any+")",e.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",e.src_auth="(?:(?:(?!"+e.src_ZCc+"|[@/\\[\\]()]).)+@)?",e.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",e.src_host_terminator="(?=$|[><｜]|"+e.src_ZPCc+")(?!-|_|:\\d|\\.-|\\.(?!$|"+e.src_ZPCc+"))",e.src_path="(?:[/?#](?:(?!"+e.src_ZCc+"|[><｜]|[()[\\]{}.,\"'?!\\-]).|\\[(?:(?!"+e.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+e.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+e.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+e.src_ZCc+'|["]).)+\\"|\\\'(?:(?!'+e.src_ZCc+"|[']).)+\\'|\\'(?="+e.src_pseudo_letter+"|[-]).|\\.{2,4}[a-zA-Z0-9%/]|\\.(?!"+e.src_ZCc+"|[.]).|"+(t&&t["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+"\\,(?!"+e.src_ZCc+").|\\!(?!"+e.src_ZCc+"|[!]).|\\?(?!"+e.src_ZCc+"|[?]).)+|\\/)?",e.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',e.src_xn="xn--[a-z0-9\\-]{1,59}",e.src_domain_root="(?:"+e.src_xn+"|"+e.src_pseudo_letter+"{1,63})",e.src_domain="(?:"+e.src_xn+"|(?:"+e.src_pseudo_letter+")|(?:"+e.src_pseudo_letter+"(?:-|"+e.src_pseudo_letter+"){0,61}"+e.src_pseudo_letter+"))",e.src_host="(?:(?:(?:(?:"+e.src_domain+")\\.)*"+e.src_domain+"))",e.tpl_host_fuzzy="(?:"+e.src_ip4+"|(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%)))",e.tpl_host_no_ip_fuzzy="(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%))",e.src_host_strict=e.src_host+e.src_host_terminator,e.tpl_host_fuzzy_strict=e.tpl_host_fuzzy+e.src_host_terminator,e.src_host_port_strict=e.src_host+e.src_port+e.src_host_terminator,e.tpl_host_port_fuzzy_strict=e.tpl_host_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_port_no_ip_fuzzy_strict=e.tpl_host_no_ip_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+e.src_ZPCc+"|>|$))",e.tpl_email_fuzzy='(^|[><｜]|"|\\(|'+e.src_ZCc+")("+e.src_email_name+"@"+e.tpl_host_fuzzy_strict+")",e.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+e.src_ZPCc+"))((?![$+<=>^`|｜])"+e.tpl_host_port_fuzzy_strict+e.src_path+")",e.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+e.src_ZPCc+"))((?![$+<=>^`|｜])"+e.tpl_host_port_no_ip_fuzzy_strict+e.src_path+")",e}},function(t,e){t.exports=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/},function(t,e){t.exports=/[\0-\x1F\x7F-\x9F]/},function(t,e){t.exports=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/},function(t,e){t.exports=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/},function(t,e){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=n=function(t){return typeof t}:t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(e)}t.exports=n},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e,n){var r=n(20);t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=r(t)););return t}},function(t,e,n){!function(t){var e=/\S/,n=/\"/g,r=/\n/g,o=/\r/g,i=/\\/g,a=/\u2028/,c=/\u2029/;function u(t){"}"===t.n.substr(t.n.length-1)&&(t.n=t.n.substring(0,t.n.length-1))}function s(t){return t.trim?t.trim():t.replace(/^\s*|\s*$/g,"")}function l(t,e,n){if(e.charAt(n)!=t.charAt(0))return!1;for(var r=1,o=t.length;r<o;r++)if(e.charAt(n+r)!=t.charAt(r))return!1;return!0}t.tags={"#":1,"^":2,"<":3,$:4,"/":5,"!":6,">":7,"=":8,_v:9,"{":10,"&":11,_t:12},t.scan=function(n,r){var o=n.length,i=0,a=null,c=null,f="",p=[],d=!1,h=0,m=0,v="{{",y="}}";function g(){f.length>0&&(p.push({tag:"_t",text:new String(f)}),f="")}function _(n,r){if(g(),n&&function(){for(var n=!0,r=m;r<p.length;r++)if(!(n=t.tags[p[r].tag]<t.tags._v||"_t"==p[r].tag&&null===p[r].text.match(e)))return!1;return n}())for(var o,i=m;i<p.length;i++)p[i].text&&((o=p[i+1])&&">"==o.tag&&(o.indent=p[i].text.toString()),p.splice(i,1));else r||p.push({tag:"\n"});d=!1,m=p.length}function b(t,e){var n="="+y,r=t.indexOf(n,e),o=s(t.substring(t.indexOf("=",e)+1,r)).split(" ");return v=o[0],y=o[o.length-1],r+n.length-1}for(r&&(r=r.split(" "),v=r[0],y=r[1]),h=0;h<o;h++)0==i?l(v,n,h)?(--h,g(),i=1):"\n"==n.charAt(h)?_(d):f+=n.charAt(h):1==i?(h+=v.length-1,"="==(a=(c=t.tags[n.charAt(h+1)])?n.charAt(h+1):"_v")?(h=b(n,h),i=0):(c&&h++,i=2),d=h):l(y,n,h)?(p.push({tag:a,n:s(f),otag:v,ctag:y,i:"/"==a?d-v.length:h+y.length}),f="",h+=y.length-1,i=0,"{"==a&&("}}"==y?h++:u(p[p.length-1]))):f+=n.charAt(h);return _(d,!0),p};var f={_t:!0,"\n":!0,$:!0,"/":!0};function p(t,e){for(var n=0,r=e.length;n<r;n++)if(e[n].o==t.n)return t.tag="#",!0}function d(t,e,n){for(var r=0,o=n.length;r<o;r++)if(n[r].c==t&&n[r].o==e)return!0}function h(t){var e=[];for(var n in t.partials)e.push('"'+v(n)+'":{name:"'+v(t.partials[n].name)+'", '+h(t.partials[n])+"}");return"partials: {"+e.join(",")+"}, subs: "+function(t){var e=[];for(var n in t)e.push('"'+v(n)+'": function(c,p,t,i) {'+t[n]+"}");return"{ "+e.join(",")+" }"}(t.subs)}t.stringify=function(e,n,r){return"{code: function (c,p,i) { "+t.wrapMain(e.code)+" },"+h(e)+"}"};var m=0;function v(t){return t.replace(i,"\\\\").replace(n,'\\"').replace(r,"\\n").replace(o,"\\r").replace(a,"\\u2028").replace(c,"\\u2029")}function y(t){return~t.indexOf(".")?"d":"f"}function g(t,e){var n="<"+(e.prefix||"")+t.n+m++;return e.partials[n]={name:t.n,partials:{}},e.code+='t.b(t.rp("'+v(n)+'",c,p,"'+(t.indent||"")+'"));',n}function _(t,e){e.code+="t.b(t.t(t."+y(t.n)+'("'+v(t.n)+'",c,p,0)));'}function b(t){return"t.b("+t+");"}t.generate=function(e,n,r){m=0;var o={code:"",subs:{},partials:{}};return t.walk(e,o),r.asString?this.stringify(o,n,r):this.makeTemplate(o,n,r)},t.wrapMain=function(t){return'var t=this;t.b(i=i||"");'+t+"return t.fl();"},t.template=t.Template,t.makeTemplate=function(t,e,n){var r=this.makePartials(t);return r.code=new Function("c","p","i",this.wrapMain(t.code)),new this.template(r,e,this,n)},t.makePartials=function(t){var e,n={subs:{},partials:t.partials,name:t.name};for(e in n.partials)n.partials[e]=this.makePartials(n.partials[e]);for(e in t.subs)n.subs[e]=new Function("c","p","t","i",t.subs[e]);return n},t.codegen={"#":function(e,n){n.code+="if(t.s(t."+y(e.n)+'("'+v(e.n)+'",c,p,1),c,p,0,'+e.i+","+e.end+',"'+e.otag+" "+e.ctag+'")){t.rs(c,p,function(c,p,t){',t.walk(e.nodes,n),n.code+="});c.pop();}"},"^":function(e,n){n.code+="if(!t.s(t."+y(e.n)+'("'+v(e.n)+'",c,p,1),c,p,1,0,0,"")){',t.walk(e.nodes,n),n.code+="};"},">":g,"<":function(e,n){var r={partials:{},code:"",subs:{},inPartial:!0};t.walk(e.nodes,r);var o=n.partials[g(e,n)];o.subs=r.subs,o.partials=r.partials},$:function(e,n){var r={subs:{},code:"",partials:n.partials,prefix:e.n};t.walk(e.nodes,r),n.subs[e.n]=r.code,n.inPartial||(n.code+='t.sub("'+v(e.n)+'",c,p,i);')},"\n":function(t,e){e.code+=b('"\\n"'+(t.last?"":" + i"))},_v:function(t,e){e.code+="t.b(t.v(t."+y(t.n)+'("'+v(t.n)+'",c,p,0)));'},_t:function(t,e){e.code+=b('"'+v(t.text)+'"')},"{":_,"&":_},t.walk=function(e,n){for(var r,o=0,i=e.length;o<i;o++)(r=t.codegen[e[o].tag])&&r(e[o],n);return n},t.parse=function(e,n,r){return function e(n,r,o,i){var a,c=[],u=null,s=null;for(a=o[o.length-1];n.length>0;){if(s=n.shift(),a&&"<"==a.tag&&!(s.tag in f))throw new Error("Illegal content in < super tag.");if(t.tags[s.tag]<=t.tags.$||p(s,i))o.push(s),s.nodes=e(n,s.tag,o,i);else{if("/"==s.tag){if(0===o.length)throw new Error("Closing tag without opener: /"+s.n);if(u=o.pop(),s.n!=u.n&&!d(s.n,u.n,i))throw new Error("Nesting error: "+u.n+" vs. "+s.n);return u.end=s.i,c}"\n"==s.tag&&(s.last=0==n.length||"\n"==n[0].tag)}c.push(s)}if(o.length>0)throw new Error("missing closing tag: "+o.pop().n);return c}(e,0,[],(r=r||{}).sectionTags||[])},t.cache={},t.cacheKey=function(t,e){return[t,!!e.asString,!!e.disableLambda,e.delimiters,!!e.modelGet].join("||")},t.compile=function(e,n){n=n||{};var r=t.cacheKey(e,n),o=this.cache[r];if(o){var i=o.partials;for(var a in i)delete i[a].instance;return o}return o=this.generate(this.parse(this.scan(e,n.delimiters),e,n),e,n),this.cache[r]=o}}(e)},function(t,e,n){!function(t){function e(t,e,n){var r;return e&&"object"==typeof e&&(void 0!==e[t]?r=e[t]:n&&e.get&&"function"==typeof e.get&&(r=e.get(t))),r}t.Template=function(t,e,n,r){t=t||{},this.r=t.code||this.r,this.c=n,this.options=r||{},this.text=e||"",this.partials=t.partials||{},this.subs=t.subs||{},this.buf=""},t.Template.prototype={r:function(t,e,n){return""},v:function(t){return t=u(t),c.test(t)?t.replace(n,"&amp;").replace(r,"&lt;").replace(o,"&gt;").replace(i,"&#39;").replace(a,"&quot;"):t},t:u,render:function(t,e,n){return this.ri([t],e||{},n)},ri:function(t,e,n){return this.r(t,e,n)},ep:function(t,e){var n=this.partials[t],r=e[n.name];if(n.instance&&n.base==r)return n.instance;if("string"==typeof r){if(!this.c)throw new Error("No compiler available.");r=this.c.compile(r,this.options)}if(!r)return null;if(this.partials[t].base=r,n.subs){for(key in e.stackText||(e.stackText={}),n.subs)e.stackText[key]||(e.stackText[key]=void 0!==this.activeSub&&e.stackText[this.activeSub]?e.stackText[this.activeSub]:this.text);r=function(t,e,n,r,o,i){function a(){}function c(){}var u;a.prototype=t,c.prototype=t.subs;var s=new a;for(u in s.subs=new c,s.subsText={},s.buf="",r=r||{},s.stackSubs=r,s.subsText=i,e)r[u]||(r[u]=e[u]);for(u in r)s.subs[u]=r[u];for(u in o=o||{},s.stackPartials=o,n)o[u]||(o[u]=n[u]);for(u in o)s.partials[u]=o[u];return s}(r,n.subs,n.partials,this.stackSubs,this.stackPartials,e.stackText)}return this.partials[t].instance=r,r},rp:function(t,e,n,r){var o=this.ep(t,n);return o?o.ri(e,n,r):""},rs:function(t,e,n){var r=t[t.length-1];if(s(r))for(var o=0;o<r.length;o++)t.push(r[o]),n(t,e,this),t.pop();else n(t,e,this)},s:function(t,e,n,r,o,i,a){var c;return(!s(t)||0!==t.length)&&("function"==typeof t&&(t=this.ms(t,e,n,r,o,i,a)),c=!!t,!r&&c&&e&&e.push("object"==typeof t?t:e[e.length-1]),c)},d:function(t,n,r,o){var i,a=t.split("."),c=this.f(a[0],n,r,o),u=this.options.modelGet,l=null;if("."===t&&s(n[n.length-2]))c=n[n.length-1];else for(var f=1;f<a.length;f++)void 0!==(i=e(a[f],c,u))?(l=c,c=i):c="";return!(o&&!c)&&(o||"function"!=typeof c||(n.push(l),c=this.mv(c,n,r),n.pop()),c)},f:function(t,n,r,o){for(var i=!1,a=!1,c=this.options.modelGet,u=n.length-1;u>=0;u--)if(void 0!==(i=e(t,n[u],c))){a=!0;break}return a?(o||"function"!=typeof i||(i=this.mv(i,n,r)),i):!o&&""},ls:function(t,e,n,r,o){var i=this.options.delimiters;return this.options.delimiters=o,this.b(this.ct(u(t.call(e,r)),e,n)),this.options.delimiters=i,!1},ct:function(t,e,n){if(this.options.disableLambda)throw new Error("Lambda features disabled.");return this.c.compile(t,this.options).render(e,n)},b:function(t){this.buf+=t},fl:function(){var t=this.buf;return this.buf="",t},ms:function(t,e,n,r,o,i,a){var c,u=e[e.length-1],s=t.call(u);return"function"==typeof s?!!r||(c=this.activeSub&&this.subsText&&this.subsText[this.activeSub]?this.subsText[this.activeSub]:this.text,this.ls(s,u,n,c.substring(o,i),a)):s},mv:function(t,e,n){var r=e[e.length-1],o=t.call(r);return"function"==typeof o?this.ct(u(o.call(r)),r,n):o},sub:function(t,e,n,r){var o=this.subs[t];o&&(this.activeSub=t,o(e,n,this,r),this.activeSub=!1)}};var n=/&/g,r=/</g,o=/>/g,i=/\'/g,a=/\"/g,c=/[&<>\"\']/;function u(t){return String(null==t?"":t)}var s=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}}(e)},function(t,e,n){var r={"./expert":[99,4],"./expert.js":[99,4],"./map":[100,5],"./map.js":[100,5],"./ui":[92,6],"./ui.js":[92,6]};function o(t){if(!n.o(r,t))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=r[t],o=e[0];return n.e(e[1]).then((function(){return n(o)}))}o.keys=function(){return Object.keys(r)},o.id=163,t.exports=o},function(t,e,n){"use strict";n.r(e);var r=n(1),o=n.n(r),i=(n(103),n(104),n(114),n(116),n(118),n(131),n(138),n(53),n(6)),a=n.n(i),c=n(7),u=n.n(c),s=n(2),l=osmAuth({oauth_consumer_key:"JVmpxVyZ0ha7NtHasW3JhRyQ4spqJLKydTU46E76",oauth_secret:"8djZYfFcMkpUYXz84PwZDdwHoKAcaEgWqFLpVWf9",url:"https://www.openstreetmap.org",auto:!0,landing:s.c()===s.b?"landing.html":"../landing.html"}),f=function(){function t(){a()(this,t)}return u()(t,[{key:"login",value:function(){var t=this;return new Promise((function(e,n){l.authenticate((function(r){r?n(r):e(t.request("GET","user/details"))}))}))}},{key:"logout",value:function(){l.logout()}},{key:"authenticated",value:function(){return l.authenticated()}},{key:"comment",value:function(t,e,n){return this.authenticated()?e?(n||(n="comment"),this.request("POST","notes/".concat(t,"/").concat(n,".json?text=").concat(encodeURIComponent(e)))):Promise.reject(new Error("No text was given")):Promise.reject(new Error("User is not authenticated"))}},{key:"request",value:function(t,e){var n={method:t,path:"/api/0.6/".concat(e)};return new Promise((function(t,e){l.xhr(n,(function(n,r){n?e(n):t(r)}))}))}}]),t}(),p=n(12),d=n(32),h=n.n(d),m=n(20),v=n.n(m),y=n(39),g=n.n(y),_=n(33),b=n.n(_),w=function(){function t(){a()(this,t)}return u()(t,null,[{key:"init",value:function(){document.getElementsByClassName("modal-trigger").forEach((function(e){e.addEventListener("click",(function(){t.open(e.dataset.modal)}))})),document.getElementsByClassName("modal-close").forEach((function(e){e.addEventListener("click",(function(e){t.close(e.target.closest(".modal"))}))}))}},{key:"open",value:function(t){var e=document.querySelector('.modal[data-modal="'.concat(t,'"]'));e.classList.add("active"),e.getElementsByClassName("modal-body")[0].scrollTop=0}},{key:"close",value:function(t){t.classList.remove("active"),t.querySelectorAll(".clear-on-modal-close").forEach((function(t){return t.innerHTML=""}))}}]),t}(),x=n(90),E=n.n(x),k=function(t){function e(){return a()(this,e),h()(this,v()(e).apply(this,arguments))}return b()(e,t),u()(e,null,[{key:"load",value:function(t){g()(v()(e),"open",this).call(this,"comments");for(var n=t.comments,r=0;r<n.length;r++)n[r].badges={age:p.a(n[r].color,n[r].date),user:p.e(n[r].uid,n[r].anonymous),status:p.d(n[r])};document.getElementById("comments").innerHTML=E()({comments:n}),document.getElementById("comments").dataset.noteId=t.id,document.getElementById("note-link").href="".concat("https://www.openstreetmap.org","/note/").concat(t.id);var o=document.getElementById("note-comment");o.value="",o.dispatchEvent(new Event("input")),o.focus(),document.querySelector('.comment-action[data-action="comment"]').style.display="open"===t.status?"block":"none",document.querySelector('.comment-action[data-action="close"]').style.display="open"===t.status?"block":"none",document.querySelector('.comment-action[data-action="reopen"]').style.display="closed"===t.status?"block":"none"}}]),e}(w),L=n(26),D=n(0),F=n(3),S=n(91),A=n.n(S),j=function(t){function e(){return a()(this,e),h()(this,v()(e).apply(this,arguments))}return b()(e,t),u()(e,null,[{key:"load",value:function(t){var n,r,i,a;return o.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return g()(v()(e),"open",this).call(this,"mapillary"),(n=document.getElementById("mapillary")).classList.add("loading","loading-lg"),r="".concat(t.coordinates[1],",").concat(t.coordinates[0]),i="https://www.mapillary.com/app/?lat=".concat(t.coordinates[0],"&lng=").concat(t.coordinates[1],"&z=17&focus=map"),document.getElementById("mapillary-link").href=i,c.next=8,o.a.awrap(F.e("https://a.mapillary.com/v3/images?closeto=".concat(r,"&radius=50&per_page=20&client_id=").concat("eUFYWUdRTmxZQVhRajkybHNRMnZoQTpiMTFjMDRlYmJmZGQ5ODNi"),F.a.JSON));case 8:a=(a=c.sent).features.map((function(t){return{key:t.properties.key,user:t.properties.username}})),n.innerHTML=A()({images:a,link:i,expert:s.c()===s.a}),D.b(document.getElementById("mapillary")),n.classList.remove("loading","loading-lg");case 13:case"end":return c.stop()}}),null,this)}}]),e}(w),B=n(40);function I(){var t=new URL(window.location);t.hash="";var e=document.getElementById("query").value,n=document.getElementById("limit").value,r=document.getElementById("show-closed").checked,o=document.getElementById("user").value,i=document.getElementById("from").value,a=document.getElementById("to").value,c=document.getElementById("hide-anonymous").checked,u={query:e,limit:n,user:o,from:i,to:a};if(r&&(u.closed=!0),c&&(u.anonymous=!1),s.c()===s.b){var l=new L.a("map"),f=document.getElementById("show-map").checked,p="".concat(l.zoom(),"/").concat(l.center().lat,"/").concat(l.center().lng);f&&p&&(u.map=p)}t.search=F.d(u),delete u.map,u=F.d(u),document.getElementById("link").href=s.c()===s.b?"./expert/?".concat(u):"../?".concat(u),document.getElementById("permalink").value=t.toString()}var O=n(4),C=n(22),T=n(31),P=n(21),z=n(9);n.p=s.c()===s.b?"dist/":"../dist/";var R,M,N,U,Z,q,G,$,H,V,J,Y=new f;function W(){var t,e,n,r,i,a,c,u;return o.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return t=document.getElementById("query").value,e=document.getElementById("limit").value,n=document.getElementById("show-closed").checked,r=document.getElementById("user").value,i=document.getElementById("from").value,a=document.getElementById("to").value,1e4<e&&(e=1e4,document.getElementById("limit").value=1e4,K(D.c("description.autoLimit"),"toast-warning")),["anonymous",D.c("note.anonymous")].includes(r)?(r=null,document.getElementById("hide-anonymous").checked=!1,document.getElementById("hide-anonymous").setAttribute("disabled","true")):document.getElementById("hide-anonymous").removeAttribute("disabled"),document.getElementById("preloader").classList.remove("d-hide"),document.getElementById("search").classList.add("d-hide"),document.getElementById("cancel").classList.remove("d-hide"),N=new C.b(t,e,n,r,i,a),(c=O.a.get("previous",!0))&&(N.url=c.url,N.api=c.api,O.a.remove("previous",!0)),s.next=16,o.a.awrap(N.search());case 16:u=s.sent,M.show(Array.from(u),N).then(X).finally((function(){document.getElementById("preloader").classList.add("d-hide"),document.getElementById("search").classList.remove("d-hide"),document.getElementById("cancel").classList.add("d-hide")}));case 18:case"end":return s.stop()}}))}function K(t,e,n){var r,i,a;return o.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return r=document.getElementById("toast-container"),(i=document.createElement("div")).classList.add("toast",e||"toast-primary"),(a=document.createElement("button")).classList.add("btn","btn-clear","float-right"),a.addEventListener("click",(function(){document.getElementById("toast-container").removeChild(i)})),i.appendChild(a),i.appendChild(document.createTextNode(t)),r.appendChild(i),c.next=11,o.a.awrap(z.f(n||4e3));case 11:r.contains(i)&&r.removeChild(i);case 12:case"end":return c.stop()}}))}function Q(){var t=document.getElementById("search"),e=document.getElementById("fast-search");4>R.boundsSize()?(e.classList.remove("d-hide"),t.classList.remove("tooltip")):(e.classList.add("d-hide"),t.classList.add("tooltip"))}function X(t){t&&(0===t.amount?(K(D.c("description.nothingFound"),"toast-error"),document.getElementById("found-notes").textContent=""):t.amount&&(document.getElementById("found-notes").textContent=D.c("note.amount",t.amount)),t.average&&(document.getElementById("average-date").innerHTML=D.c("note.average",p.a(z.e(t.average),t.average,!0))))}function tt(){new URL(window.location.href).searchParams.forEach((function(t,e){switch(e){case"map":if(s.c()===s.b){var n=t.split("/");R.setView([n[1],n[2]],n[0])}break;case"query":document.getElementById("query").value=t;break;case"limit":document.getElementById("limit").value=t;break;case"user":document.getElementById("user").value=t;break;case"from":document.getElementById("from").value=t;break;case"to":document.getElementById("to").value=t;break;case"closed":document.getElementById("show-closed").checked=!("true"!==t);break;case"anonymous":document.getElementById("hide-anonymous").checked="true"!==t}}));var t=window.location.toString();0<t.indexOf("?")&&window.history.replaceState({},document.title,t.substring(0,t.indexOf("?"))),I()}function et(){var t=O.a.get("editors"),e=O.a.get("tools");document.getElementById("editor-id").checked=t.id,document.getElementById("editor-josm").checked=t.josm,document.getElementById("editor-level0").checked=t.level0,document.getElementById("tool-openstreetmap").checked=e.openstreetmap,document.getElementById("tool-mapillary").checked=e.mapillary,document.body.dataset.editorId=t.id,document.body.dataset.editorJosm=t.josm,document.body.dataset.editorLevel0=t.level0,document.body.dataset.toolOpenstreetmap=e.openstreetmap,document.body.dataset.toolMapillary=e.mapillary;var n=O.a.get("theme");document.getElementById("theme-selection").value=n,T.c(n)}o.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return(-1!==window.navigator.userAgent.indexOf("MSIE ")||window.navigator.userAgent.match(/Trident.*rv:11\./))&&document.body.classList.add("deprecated-browser"),t.next=3,o.a.awrap(n.e(7).then(n.bind(null,174)));case 3:return t.next=5,o.a.awrap(D.a());case 5:return w.init(),O.a.init(),U=s.c()===s.b?"map":"expert",t.next=10,o.a.awrap(n(163)("./".concat(U)));case 10:Z=t.sent,q=Z.default,M=new q,null===O.a.get("lastVisit")&&(O.a.reset(),O.a.set({lastVisit:(new Date).getTime()})),s.c()===s.b&&(R=new L.a("map",Q),!new URL(window.location.href).searchParams.has("map")&&(G=O.a.get("map")||{},$=G.latitude,H=G.longitude,V=G.zoom,$&&H&&V&&R.setView([$,H],V))),J=Y.authenticated(),document.body.dataset.authenticated=J,J?(document.getElementById("login").classList.add("d-hide"),document.getElementById("logout").classList.remove("d-hide"),P.a.avatar(O.a.get("uid"))):(document.getElementById("login").classList.remove("d-hide"),document.getElementById("logout").classList.add("d-hide")),document.querySelector('.modal-trigger[data-modal="share"]').addEventListener("click",(function(){return I()})),document.getElementById("search").addEventListener("click",(function(){return W()})),document.getElementById("cancel").addEventListener("click",(function(){return F.c()})),document.getElementById("sort-order")&&(document.getElementById("sort-order").checked=!0,document.getElementById("sort-order").addEventListener("change",(function(){document.getElementById("notes").classList.toggle("reverse")}))),document.getElementById("hide-anonymous").addEventListener("change",(function(){M.reload().then(X)})),document.getElementById("login").addEventListener("click",(function(){var t=document.getElementById("login");t.classList.add("loading"),Y.login().then((function(e){t.classList.add("d-hide"),document.getElementById("logout").classList.remove("d-hide"),document.body.dataset.authenticated=!0;var n=e.getElementsByTagName("user")[0].getAttribute("id");O.a.set({uid:n}),P.a.avatar(n)})).catch((function(t){console.log(t),document.body.dataset.authenticated=!1})).finally((function(){t.classList.remove("loading")}))})),document.getElementById("logout").addEventListener("click",(function(){Y.logout(),document.getElementById("logout").classList.add("d-hide"),document.getElementById("login").classList.remove("d-hide"),document.body.dataset.authenticated=!1})),document.getElementById("note-comment").addEventListener("input",(function(){""===document.getElementById("note-comment").value.trim()?document.getElementById("note-comment-actions").classList.add("d-hide"):document.getElementById("note-comment-actions").classList.remove("d-hide")})),document.getElementsByClassName("comment-action").forEach((function(t){t.addEventListener("click",(function(){t.classList.add("loading");var e=Number.parseInt(document.getElementById("comments").dataset.noteId),n=document.getElementById("note-comment").value.trim();Y.comment(e,n,t.dataset.action).then((function(t){M.update(e,new B.a(JSON.parse(t),N.api)).then(X),k.load(M.get(e))})).catch((function(t){console.log(t)})).finally((function(){t.classList.remove("loading")}))}))})),document.getElementsByClassName("setting").forEach((function(t){t.addEventListener("change",(function(){O.a.set({theme:document.getElementById("theme-selection").value,editors:{id:document.getElementById("editor-id").checked,josm:document.getElementById("editor-josm").checked,level0:document.getElementById("editor-level0").checked},tools:{openstreetmap:document.getElementById("tool-openstreetmap").checked,mapillary:document.getElementById("tool-mapillary").checked}}),et()}))})),document.getElementsByClassName("update-link").forEach((function(t){t.addEventListener("change",(function(){return I()}))})),document.getElementById("permalink").addEventListener("click",document.getElementById("permalink").select),document.getElementById("permalink").addEventListener("dblclick",(function(){document.getElementById("permalink").select(),document.execCommand("copy"),K(D.c("action.copyLinkSuccess"),"toast-success")})),document.getElementById("link").addEventListener("click",(function(){O.a.set({previous:{url:N.url,api:N.api}},!0)})),document.addEventListener("keydown",(function(t){if(13===t.which){if(s.c()===s.b&&document.querySelector(".leaflet-control-geocoder-form input")===document.activeElement)return;F.f()?(F.c(),document.getElementById("preloader").classList.add("d-hide"),document.getElementById("search").classList.remove("d-hide"),document.getElementById("cancel").classList.add("d-hide")):W()}})),window.addEventListener("beforeunload",(function(){if(document.getElementById("remote").remove(),s.c()===s.b){var t=R.center();O.a.set({map:{latitude:t.lat,longitude:t.lng,zoom:R.zoom()}})}O.a.set({lastVisit:(new Date).getTime()})})),document.addEventListener("click",(function(t){var e=t.target.closest(".comments-modal-trigger");if(e){var n=Number.parseInt(e.closest("[data-note-id]").dataset.noteId);k.load(M.get(n))}var r=t.target.closest(".link-tool-mapillary");if(r){var o=Number.parseInt(r.closest("[data-note-id]").dataset.noteId);j.load(M.get(o))}})),tt(),et(),W();case 22:case"end":return t.stop()}}))}]);
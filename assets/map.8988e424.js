import{i as e,L as o}from"./main.5cd24705.js";import s from"./ui.b4810904.js";import{h as r}from"./vendor.cd34abf3.js";import{t as a}from"./note.35a546c2.js";const t=r.compile(a),m=new o("map");export default class extends s{show(o,s,r){this.notes=o,this.query=s;let a=0,n=0;const i=L.markerClusterGroup({maxClusterRadius:40});return o.forEach((o=>{if(e(o,s)){let e;a++,n+=o.created.getTime(),e=s.closed?"open"===o.status?"markers/green.svg":"markers/red.svg":`markers/${o.color}.svg`,L.marker(o.coordinates,{icon:new L.divIcon({html:`<img alt="" src="${e}" class="marker-icon">`,iconSize:[25,40],iconAnchor:[12.5,40],popupAnchor:[0,-30],className:"marker-icon"})}).bindPopup(t({id:o.id,badges:o.badges,comment:o.comments[0].html,actions:o.actions}),{maxWidth:o.comments[0].images.length>1?document.getElementById("map").offsetWidth-200:350}).addTo(i)}})),m.removeLayers(),m.addLayer(i),!r&&a>0&&m.flyToBounds(i.getBounds(),1),Promise.resolve({amount:a,average:new Date(n/a)})}}
